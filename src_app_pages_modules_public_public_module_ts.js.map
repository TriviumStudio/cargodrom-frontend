{"version":3,"file":"src_app_pages_modules_public_public_module_ts.js","mappings":"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","sources":["./src/app/pages/components/rate-editor/rate-editor.component.ts","./src/app/pages/components/rate-editor/rate-editor-test.comp.html","./src/app/pages/components/request-rate/request-rate.component.ts","./src/app/pages/components/request-rate/request-rate.component.html","./src/app/pages/modules/public/public.module.ts","./src/app/pages/services/calculations.service.ts"],"sourcesContent":["import { FormBuilder, FormGroup, FormArray, Validators, ControlValueAccessor, NG_VALUE_ACCESSOR, AbstractControl, ValidationErrors, Validator, NG_VALIDATORS } from '@angular/forms';\nimport { Component, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChanges, TemplateRef, ViewChild, ViewEncapsulation } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { takeUntil, tap } from 'rxjs/operators';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { MatDialog } from '@angular/material/dialog';\nimport { TransportCarrier } from 'src/app/api/custom_models/transport';\nimport { CalculationsService } from '../../services/calculations.service';\nimport { TransportService } from 'src/app/api/services';\nimport { DirectionService } from 'src/app/api/services';\nimport { formatDate } from '@angular/common';\n\ninterface ChargeModel {\n  field_name: string;\n  name: string;\n  title: string;\n  unit?: string;\n  field_min: boolean;\n  field_fix: boolean;\n  field_comment: boolean;\n  status: boolean;\n  requare: boolean;\n  note?: string;\n}\n\ninterface ChargeValue {\n  field: string;\n  select: boolean;\n  price?: number;\n  min?: number;\n  fix?: number;\n  value?: number;\n  cost?: number;\n  comment?: string;\n}\n\n@Component({\n  selector: 'app-rate-editor',\n  // templateUrl: './rate-editor.component.html',\n  templateUrl: './rate-editor-test.comp.html',\n  encapsulation: ViewEncapsulation.None,\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      multi: true,\n      useExisting: RateEditorComponent,\n    },\n    {\n      provide: NG_VALIDATORS,\n      useExisting: RateEditorComponent,\n      multi: true,\n    },\n  ]\n})\nexport class RateEditorComponent implements OnInit, OnDestroy, OnChanges, ControlValueAccessor, Validator {\n  @Input() requestKindId!: number;\n  @Input() rates?: any[];\n  @Input() currentRateNumber?: number;\n  @Input() chargeModel: ChargeModel[] = [];\n  @Input() weight?: number;\n  @Input() request?: any;\n  @Input() currency?: any[];\n\n  @Output() removeRate = new EventEmitter<void>();\n  @Output() addRate = new EventEmitter<void>();\n  @Output() indexRateChange = new EventEmitter<number>();\n  @Output() duplicateRate = new EventEmitter<void>();\n\n  rateForm: FormGroup;\n  transportCarrier: TransportCarrier[] = [];\n  transportRoute: any[] = [];\n\n  daysOfTheWeek = [\n    { day: 'Monday', id: 1, date_id: 1 },\n    { day: 'Tuesday', id: 2, date_id: 2 },\n    { day: 'Wednesday', id: 3, date_id: 3 },\n    { day: 'Thursday', id: 4, date_id: 4 },\n    { day: 'Friday', id: 5, date_id: 5 },\n    { day: 'Saturday', id: 6, date_id: 6 },\n    { day: 'Sunday', id: 7, date_id: 0 },\n  ];\n\n  private _destroy$ = new Subject<void>();\n  private touched = false;\n\n  @ViewChild('deleteRateDialogRef') deleteRateDialogRef?: TemplateRef<void>;\n\n  constructor(\n    private fb: FormBuilder,\n    private calculationsService: CalculationsService,\n    private transportService: TransportService,\n    private directionService: DirectionService,\n    private snackBar: MatSnackBar,\n    private dialog: MatDialog,\n  ) {\n    this.rateForm = this.createForm();\n  }\n\n  ngOnInit(): void {\n    this.initializeForm();\n    this.loadTransportData();\n    this.setupFormSubscriptions();\n  }\n\n  ngOnDestroy(): void {\n    this._destroy$.next();\n    this._destroy$.complete();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes['weight'] && this.weight) {\n      this.updateWeightDependentCharges();\n    }\n    if (this.rateForm.value.rate_type === 'detail') {\n      this.calculateTotalCost();\n    }\n  }\n\n  // ControlValueAccessor implementation\n  writeValue(value: any): void {\n    if (value) {\n      this.rateForm.patchValue(value, { emitEvent: false });\n    }\n  }\n\n  registerOnChange(fn: any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: any): void {\n    this.onTouched = fn;\n  }\n\n  validate(control: AbstractControl): ValidationErrors | null {\n    return this.rateForm.valid ? null : { rateForm: true };\n  }\n\n  // Public properties\n  get charges(): FormArray {\n    return this.rateForm.get('values') as FormArray;\n  }\n\n  get rateChar(): string {\n    const currency = this.currency?.find(c => c.id === this.rateForm.value.currency);\n    return currency?.char || '?';\n  }\n\n  get rateCode(): string {\n    const currency = this.currency?.find(c => c.id === this.rateForm.value.currency);\n    return currency?.code || '?';\n  }\n\n  // Public methods\n  onDeleteRate(): void {\n    if (!this.deleteRateDialogRef) return;\n\n    this.dialog.open(this.deleteRateDialogRef)\n      .afterClosed()\n      .subscribe(res => {\n        if (res) this.removeRate.emit();\n      });\n  }\n\n  onAddRate(): void {\n    this.addRate.emit();\n  }\n\n  onChangeRate(index: number): void {\n    this.indexRateChange.emit(index);\n  }\n\n  onDuplicateRate(): void {\n    this.duplicateRate.emit();\n  }\n\n  onRateTypeChange(): void {\n    this.resetChargeValues();\n  }\n\n  onRouteChange(route: any): void {\n    this.rateForm.patchValue({\n      transit_time: {\n        transit_time_from: route.days_min,\n        transit_time_to: route.days_max,\n      },\n    });\n  }\n\n  calculateCharge(control: any): void {\n  const value = control.value;\n\n  //   min  fix,  cost    price\n  let costValue = 0;\n\n  if (value.min !== null && value.min !== undefined && value.min > 0) {\n    //    \n    const calculatedCost = (value.price || 0) * (value.value || 0);\n    costValue = Math.max(value.min, calculatedCost);\n  } else if (value.fix !== null && value.fix !== undefined && value.fix > 0) {\n    //    \n    costValue = (value.price || 0) * (value.value || 0) + value.fix;\n  } else if (value.price !== null && value.price !== undefined && value.price > 0) {\n    //  \n    costValue = value.price * (value.value || 0);\n  } else {\n    //   cost  \n    costValue = value.cost || 0;\n  }\n\n  //   2 \n  costValue = parseFloat(costValue.toFixed(2));\n\n  control.patchValue({ cost: costValue }, { emitEvent: false });\n  this.calculateTotalCost();\n}\n\n  // calculateCharge(control: any): void {\n  //   const costValue = this.calculationsService.calculateRate(\n  //     control.value.price,\n  //     control.value.value,\n  //     { min: control.value.min, fix: control.value.fix }\n  //   );\n  //   control.patchValue({ cost: costValue }, { emitEvent: false });\n  //   this.calculateTotalCost();\n  // }\n\n  calculateCostDirectly(control: any): void {\n    control.patchValue({\n      value: control.value.cost,\n      price: 1,\n    }, { emitEvent: false });\n  }\n\n  filterIata(): any[] {\n  const searchTerm = this.rateForm.value.carrier_name?.toLowerCase().replace(/\\s/g, '') || '';\n  return this.transportCarrier?.filter(option =>\n    option.iata?.toLowerCase().replace(/\\s/g, '').includes(searchTerm)\n  ) || [];\n}\n\nfilterRoutes(): any[] {\n  const searchTerm = this.rateForm.value.route_name?.toLowerCase().replace(/\\s/g, '') || '';\n  return this.transportRoute?.filter(option =>\n    option.name.toLowerCase().replace(/\\s/g, '').includes(searchTerm)\n  ) || [];\n}\n\n  getAirlineName(iata: string): string {\n    const carrier = this.transportCarrier.find(c =>\n      c.iata?.toLowerCase() === iata?.toLowerCase()\n    );\n    return iata==''?'':carrier?.name || '';\n  }\n\n  // Private methods\n  private createForm(): FormGroup {\n    return this.fb.group({\n      carrier_desc: [''],\n      carrier_name: [''],\n      comment: [''],\n      departure_schedule: [[]],\n      id: [null],\n      nearest_flight: [[]],\n      num: [null],\n      profit_include: [true],\n      rate_type: ['nodetail'],\n      route_name: [''],\n      total_cost: [0],\n      transit_time: this.fb.group({\n        transit_time_from: [null],\n        transit_time_to: [null],\n      }),\n      currency: [null],\n      values: this.fb.array([]),\n      valid_time: [''],\n    });\n  }\n\n  private initializeForm(): void {\n    this.initializeCharges();\n\n    if (this.request?.currency) {\n      this.rateForm.patchValue({\n        currency: this.request.currency\n      });\n    }\n  }\n  private initializeCharges(): void {\n  this.charges.clear();\n\n  //      ( )\n  const existingValues = this.rateForm.value.values || [];\n\n  this.chargeModel.forEach(charge => {\n\n    //      \n    const existingValue = existingValues.find((v: any) => v.field === charge.field_name);\n\n    const selectValue = existingValue?.select ?? (charge.requare || charge.status);\n    const initialValue = charge.unit === 'kg' ? this.weight : (existingValue?.value ?? 1);\n\n    const chargeGroup = this.fb.group({\n      field: [charge.field_name],\n      select: [selectValue],\n      price: [existingValue?.price || null],\n      min: [existingValue?.min || null],\n      fix: [existingValue?.fix || null],\n      value: [initialValue],\n      cost: [existingValue?.cost || null],\n      comment: [existingValue?.comment || null],\n    });\n\n    //     \n    chargeGroup.valueChanges.pipe(takeUntil(this._destroy$)).subscribe(() => {\n      if (this.rateForm.value.rate_type === 'detail') {\n        this.calculateTotalCost();\n      }\n    });\n\n    this.charges.push(chargeGroup);\n  });\n}\n\n  // private initializeCharges(): void {\n  //   this.charges.clear();\n\n  //   this.chargeModel.forEach(charge => {\n  //     const selectValue = charge.requare || charge.status;\n  //     const initialValue = charge.unit === 'kg' ? this.weight : 1;\n\n  //     const chargeGroup = this.fb.group({\n  //       field: [charge.field_name],\n  //       select: [selectValue],\n  //       price: [null],\n  //       min: [null],\n  //       fix: [null],\n  //       value: [initialValue],\n  //       cost: [null],\n  //       comment: [null],\n  //     });\n\n  //     //     \n  //     chargeGroup.valueChanges.pipe(takeUntil(this._destroy$)).subscribe(() => {\n  //       if (this.rateForm.value.rate_type === 'detail') {\n  //         this.calculateTotalCost();\n  //       }\n  //     });\n\n  //     this.charges.push(chargeGroup);\n  //   });\n  // }\n\n  private setupFormSubscriptions(): void {\n    this.rateForm.valueChanges.pipe(takeUntil(this._destroy$)).subscribe(value => {\n      this.onChange(value);\n\n      if (!this.touched) {\n        this.onTouched();\n        this.touched = true;\n      }\n    });\n  }\n\n  private loadTransportData(): void {\n    this.getTransportCarrier();\n    this.getTransportRoute();\n  }\n\n  private updateWeightDependentCharges(): void {\n    this.charges.controls.forEach((control, index) => {\n      const chargeModel = this.chargeModel[index];\n      if (chargeModel?.unit === 'kg' && this.weight) {\n        control.patchValue({ value: this.weight }, { emitEvent: false });\n      }\n    });\n  }\n\n  private calculateTotalCost(): void {\n  const total = this.charges.controls\n    .filter(control => control.value.select && control.value.cost)\n    .reduce((sum, control) => sum + (control.value.cost || 0), 0);\n\n  //   2   \n  const roundedTotal = parseFloat(total.toFixed(2));\n\n  this.rateForm.patchValue({ total_cost: roundedTotal }, { emitEvent: false });\n}\n\n  // private calculateTotalCost(): void {\n  //   const total = this.charges.controls\n  //     .filter(control => control.value.select && control.value.cost)\n  //     .reduce((sum, control) => sum + (control.value.cost || 0), 0);\n\n  //   this.rateForm.patchValue({ total_cost: total }, { emitEvent: false });\n  // }\n\n  private resetChargeValues(): void {\n    this.charges.controls.forEach(control => {\n      control.patchValue({\n        comment: null,\n        cost: null,\n        fix: null,\n        min: null,\n        price: null,\n      }, { emitEvent: false });\n    });\n    this.rateForm.patchValue({ total_cost: 0 }, { emitEvent: false });\n  }\n\n  private getTransportCarrier(): void {\n    this.transportService.transportCarrier({ kind_id: this.requestKindId })\n      .pipe(takeUntil(this._destroy$))\n      .subscribe({\n        next: (carriers) => {\n          this.transportCarrier = carriers || [];\n        },\n        error: (err) => {\n          this.showError('  ', err);\n        }\n      });\n  }\n\n  private getTransportRoute(): void {\n    this.directionService.directionRoute({\n      kind_id: this.requestKindId,\n      arrival_city_id: this.request?.arrival_city_id,\n      departure_country_id: this.request?.departure_country_id\n    })\n      .pipe(takeUntil(this._destroy$))\n      .subscribe({\n        next: (routes) => {\n          this.transportRoute = routes || [];\n        },\n        error: (err) => {\n          this.showError('  ', err);\n        }\n      });\n  }\n\n  private showError(message: string, err: any): void {\n    const errorMsg = err?.error?.error_message_description || err?.error?.error_message || ' ';\n    this.snackBar.open(`${message}: ${errorMsg}`, '', { duration: 5000 });\n  }\n\n  //       ControlValueAccessor\n  private onChange: (value: any) => void = () => {};\n  private onTouched: () => void = () => {};\n\n  //      RateEditorComponent\n\ngetChargeTitle(fieldName: string): string {\n  const charge = this.chargeModel.find(item => item.field_name === fieldName);\n  return charge?.name || fieldName;\n}\n\ngetChargeUnit(fieldName: string): string {\n  const charge = this.chargeModel.find(item => item.field_name === fieldName);\n  return charge?.unit || '';\n}\n\nhasMin(fieldName: string): boolean {\n  const charge = this.chargeModel.find(item => item.field_name === fieldName);\n  return charge?.field_min || false;\n}\n\nhasFix(fieldName: string): boolean {\n  const charge = this.chargeModel.find(item => item.field_name === fieldName);\n  return charge?.field_fix || false;\n}\n\nhasComment(fieldName: string): boolean {\n  const charge = this.chargeModel.find(item => item.field_name === fieldName);\n  return charge?.field_comment || false;\n}\n\ngetSelectedDateText(): string {\n  const dates = this.rateForm.value.nearest_flight || [];\n  if (dates.length === 0) return '';\n\n  const formattedDates = dates.map((date: string) => {\n    const dateObj = new Date(date);\n    return {\n      day: dateObj.getDate(),\n      month: dateObj.toLocaleString('en-US', { month: 'short' }),\n      date: date\n    };\n  }).sort((a: any, b: any) => new Date(a.date).getTime() - new Date(b.date).getTime());\n\n  let result = '';\n  formattedDates.forEach((date: any, index: number) => {\n    const nextDate = formattedDates[index + 1];\n    if (nextDate && nextDate.month === date.month) {\n      result += date.day + ',';\n    } else {\n      result += date.day + ' ' + date.month + (index === formattedDates.length - 1 ? '' : ', ');\n    }\n  });\n\n  return result;\n}\n\nonDateSelect(event: any, calendar: any): void {\n  const date = event.toISOString().split('T')[0];\n  const currentDates = this.rateForm.value.nearest_flight || [];\n\n  const index = currentDates.findIndex((d: string) => d === date);\n  if (index >= 0) {\n    currentDates.splice(index, 1);\n  } else {\n    currentDates.push(date);\n\n    //        departure_schedule\n    const selectedDate = new Date(date);\n    let dayOfWeek = selectedDate.getDay()==0?1:selectedDate.getDay()+1; // 0 - , 1 - , etc.\n\n    console.log('dayOfWeek',dayOfWeek);\n    //   (0)  7     \n    // if (dayOfWeek === 0) {\n    //   dayOfWeek = 7;\n    // }\n\n    console.log('dayOfWeek',dayOfWeek);\n\n    const departureSchedule = this.rateForm.value.departure_schedule || [];\n    const isDateInSchedule = departureSchedule.includes(dayOfWeek);\n\n    if (!isDateInSchedule && departureSchedule.length > 0) {\n      this.snackBar.open(\n        `      `,\n        undefined,\n        {\n          duration: 2000,\n          verticalPosition: 'top',\n          horizontalPosition: 'center',\n          panelClass: ['centered-snackbar']\n        }\n      );\n    }\n  }\n\n  this.rateForm.patchValue({ nearest_flight: currentDates });\n  calendar.updateTodaysDate();\n}\n\ndateClass = (event: any) => {\n  const date = event.toISOString().split('T')[0];\n  const dates = this.rateForm.value.nearest_flight || [];\n  return dates.find((d: string) => d === date) ? \"selected\" : \"\";\n}\nonValidChange(){\n    this.rateForm.patchValue({\n      valid_time: formatDate(this.rateForm.value.valid_time,'yyyy-MM-dd','en-US')\n    })\n  }\n}\n// import { Country } from '../../../api/custom_models/country';\n// import { Contact, responsibilityDirections } from '../../../api/custom_models';\n// import { FormBuilder, FormGroup, Validators, ControlValueAccessor, NG_VALUE_ACCESSOR, AbstractControl, ValidationErrors, Validator, NG_VALIDATORS, FormArray, FormControl, ReactiveFormsModule } from '@angular/forms';\n// import { Component, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChanges, TemplateRef, ViewChild, ViewEncapsulation } from '@angular/core';\n// import { Subject } from 'rxjs';\n// import { takeUntil, tap } from 'rxjs/operators';\n// import { unknownCountry } from 'src/app/shared/constants';\n// import { CargoPackage } from 'src/app/api/custom_models/cargo';\n// import { CargoService, ContractorService, DirectionService, TransportService } from 'src/app/api/services';\n// import { MatSnackBar, MatSnackBarConfig } from '@angular/material/snack-bar';\n// import { TransportCarrier, TransportRoute } from 'src/app/api/custom_models/transport';\n// import { CommonModule, formatDate } from '@angular/common';\n// import { MatDialog } from '@angular/material/dialog';\n// import { CalculationsService } from '../../services/calculations.service';\n// import { RequestRateComponent } from '../request-rate/request-rate.component';\n// import { MaterialModule } from '@cargodrom/material/material.module';\n\n// @Component({\n//   selector: 'app-rate-editor',\n//   templateUrl: './rate-editor.component.html',\n//   // styleUrls: ['./rate-editor.component.scss'],\n//   encapsulation: ViewEncapsulation.None,\n//   providers: [\n//     {\n//       provide: NG_VALUE_ACCESSOR,\n//       multi: true,\n//       useExisting: RateEditorComponent,\n//     },\n//     {\n//       provide: NG_VALIDATORS,\n//       useExisting: RateEditorComponent,\n//       multi: true,\n//     },\n//   ]\n// })\n// export class RateEditorComponent implements OnInit, OnDestroy, OnChanges, ControlValueAccessor, Validator {\n//   @Input() requestKindId!:number;\n//   @Input() rates?:any;\n//   @Input() currentRateNumber?:number;\n//   @Input() chargeModel?:any;\n//   @Input() weight?:number;\n//   @Input() request?:any;\n//   @Input() currency?:any;\n\n//   @Output() removeRate = new EventEmitter<void>();\n//   @Output() addRate = new EventEmitter<void>();\n//   @Output() indexRateChange = new EventEmitter<Number>();\n//   @Output() duplicateRate = new EventEmitter<void>();\n\n//   onChange = (value: Partial<any>) => { };\n//   onTouched = () => { };\n//   private touched = false;\n\n//   snackBarWithShortDuration: MatSnackBarConfig = { duration: 4000 };\n//   snackBarWithLongDuration: MatSnackBarConfig = { duration: 8000 };\n\n//   private _destroy$ = new Subject();\n//   rateForm: FormGroup;\n//   transportCarrier: TransportCarrier[]=[];\n//   transportRoute: any[]=[];\n//   contractorList:any[]=[];\n\n//   daysOfTheWeek=[\n//     { day:'Monday', id:1, date_id:1 },\n//     { day:'Tuesday', id:2, date_id:2 },\n//     { day:'Wednesday', id:3, date_id:3 },\n//     { day:'Thursday', id:4, date_id:4 },\n//     { day:'Friday', id:5, date_id:5 },\n//     { day:'Saturday', id:6, date_id:6 },\n//     { day:'Sunday', id:7, date_id:0 },\n//   ]\n\n//   @ViewChild('deleteRateDialogRef') deleteRateDialogRef?: TemplateRef<void>;\n\n//   constructor(\n//     private calculationsService: CalculationsService,\n//     private fb: FormBuilder,\n//     private transportService: TransportService,\n//     private snackBar: MatSnackBar,\n//     private dialog: MatDialog,\n//     private contractorService: ContractorService,\n//     private directionService: DirectionService,\n//   ) {\n//     this.rateForm = this.fb.group({\n//       carrier_desc: [,[]],\n//       carrier_name: [,[]],\n//       comment: [,[]],\n//       departure_schedule: [[],[]],\n//       id: [,[]],\n//       nearest_flight: [[],[]],\n//       num: [,[]],\n//       profit_include: [true,[]],\n//       rate_type: ['nodetail',[]],\n//       // route_id: [,[]],\n//       route_name: ['',[]],\n//       total_cost: [,[]],\n//       transit_time: this.fb.group({\n//         transit_time_from: [, []],\n//         transit_time_to: [, []],\n//       }),\n//       currency: [,[]],\n//       values: fb.array([\n//         // this.fb.group({\n//         //   comment: [,[]],\n//         //   cost: [,[]],\n//         //   field: [,[]],\n//         //   fix: [,[]],\n//         //   min: [,[]],\n//         //   price: [,[]],\n//         //   select: [,[]],\n//         //   value: [,[]],\n//         // })\n//       ], []),\n//     });\n//   }\n\n//   //  \n//   ngOnInit(): void {\n//     this.getTransportCarrier();\n//     this.getTransportRoute();\n\n//     this.chargeModel.forEach((i:any)=>{\n//       console.log(i);\n\n//       const selectValue = i.requare == true ? true : i.status;\n//       this.charges.push(this.fb.group({\n//         comment: [,[]],\n//         cost: [,[]],\n//         field: [i.field_name,[]],\n//         fix: [,[]],\n//         min: [,[]],\n//         price: [,[]],\n//         select: [selectValue,[]],\n//         // select: [i.status,[]],\n//         value: [i.unit=='kg'?this.weight:1,[]],\n//       }));\n//       this.rateForm.markAsTouched();\n//     });\n\n//     this.rateForm.valueChanges.pipe(takeUntil(this._destroy$)).subscribe(value => {\n//       this.onChange(value)\n//     });\n//     this.rateForm.statusChanges.pipe(takeUntil(this._destroy$)).subscribe(() => {\n//       if (!this.touched) {\n//         this.onTouched();\n//         this.touched = true;\n//       }\n//     });\n\n//     if(this.rateForm.value.currency==null){\n//       this.rateForm.patchValue({\n//         currency: this.request.currency\n//       })\n//     }\n//     this.rateForm.markAsTouched();\n//       console.log('Charge Model from backend:', this.chargeModel);\n//   console.log('FormArray values after initialization:', this.charges.value);\n//   }\n//   ngOnDestroy(): void {\n//     this._destroy$.next(null);\n//     this._destroy$.complete();\n//   }\n\n//   get rateChar(){\n//     const i = this.currency?.find((r:any) => r.id === this.rateForm.value.currency);\n//     return i?.char?i.char:'?';\n//   }\n//   get rateCode(){\n//     const i = this.currency?.find((r:any) => r.id === this.rateForm.value.currency);\n//     return i?.code?i.code:'?';\n//   }\n\n//   ngOnChanges(changes: SimpleChanges): void {\n//     if(this.rateForm.value.rate_type==='detail') this.calckTotalCost();\n//   }\n\n//   // ControlValueAccessor\n//   writeValue(contact: any): void {\n//     this.rateForm.patchValue(contact);\n//   }\n//   registerOnChange(fn: any): void {\n//     this.onChange = fn;\n//   }\n//   registerOnTouched(fn: any): void {\n//     this.onTouched = fn;\n//   }\n//   validate(control: AbstractControl): ValidationErrors | null {\n//     return control.value && this.rateForm.valid ? null : { contact: true };\n//   }\n\n//   // Rates\n//   onDeleteRate(): void {\n//     if (!this.deleteRateDialogRef) { return }\n//     this.dialog.open(this.deleteRateDialogRef)\n//       .afterClosed()\n//       .subscribe(res => {\n//         if (res) { this.removeRate.emit() }\n//     });\n//   }\n//   onAddRate(): void {\n//     this.addRate.emit();\n//   }\n//   onChangeRate(i:number): void {\n//     this.indexRateChange.emit(i);\n//   }\n//   onDuplicateRate(): void {\n//     this.duplicateRate.emit();\n//   }\n\n//   // Charges\n//   addCharge() {\n//     this.charges.push(this.fb.group({\n//       comment: [,[]],\n//       cost: [,[]],\n//       field: [,[]],\n//       fix: [,[]],\n//       min: [,[]],\n//       price: [,[]],\n//       select: [false,[]],\n//       value: [,[]],\n//     }));\n//     this.rateForm.markAsTouched();\n//   }\n//   get charges() {\n//     return <FormArray>this.rateForm.get('values');\n//   }\n\n//   //  \n\n\n//   onRouteChange(route:any){\n//     this.rateForm.patchValue({\n//       // route_id: route.id,\n//       // route_name: route.name,\n//       transit_time: {\n//         transit_time_from: route.days_min,\n//         transit_time_to: route.days_max,\n//       },\n//     });\n//   }\n\n//   filterRote(){\n//     const filterRoute=this.transportRoute?.filter((option:any) => option.name.toLowerCase().replaceAll(' ', '').includes(this.rateForm.value.route_name?.toLowerCase().replaceAll(' ', '')));\n//     return filterRoute.length==0\n//     ? []\n//     : filterRoute\n//   }\n//   filterIata(){\n//     const filterIata=this.transportCarrier?.filter((option:any) => option.iata.toLowerCase().replaceAll(' ', '').includes(this.rateForm.value.carrier_name?.toLowerCase().replaceAll(' ', '')));\n//     return filterIata.length==0\n//     ? []\n//     : filterIata\n//   }\n\n//   returnAirlineName(iata:string):string{\n//     let name:any='';\n//     this.transportCarrier.forEach((i:TransportCarrier)=>{\n//       if(iata?.toLowerCase()==i.iata?.toLowerCase()){ name=i.name };\n//     });\n//     return name;\n//   }\n//   returnAirlineIata(id:number):string{\n//     let name:any='';\n//     this.transportCarrier.forEach((i:TransportCarrier)=>{\n//       if(id==i.id){ name=i.iata };\n//     });\n//     return id===undefined?' ? ':name\n//   }\n\n//   onRateTypeChange(){\n//     this.charges.controls.forEach((e:any)=>{\n//       e.controls['comment'].reset();\n//       e.controls['cost'].reset();\n//       e.controls['fix'].reset();\n//       e.controls['min'].reset();\n//       e.controls['price'].reset();\n//     })\n//     this.rateForm.controls['total_cost'].reset();\n//   }\n//   //Calck\n//   calck(control: any) {\n//     const costValue = this.calculationsService.calculateRate(\n//       control.value.price,\n//       control.value.value,\n//       { min: control.value.min, fix: control.value.fix}\n//     );\n//     control.patchValue({ cost: costValue });\n//   }\n//   // calck(control: any) {\n//   //   let costValue: number;\n\n//   //   if (control.value.min) {\n//   //     costValue = control.value.min < control.value.price * control.value.value\n//   //     ? control.value.price * control.value.value\n//   //     : control.value.min;\n//   //   } else if (control.value.fix) {\n//   //     costValue = (control.value.price * control.value.value) + control.value.fix;\n//   //   } else {\n//   //     costValue = control.value.price * control.value.value;\n//   //   }\n\n//   //   //      \n//   //   const roundedCost = parseFloat(costValue.toFixed(2));\n\n//   //   control.patchValue({ cost: roundedCost });\n//   // }\n//   // calck(control:any){\n//   //   if(control.value.min){\n//   //     control.patchValue({\n//   //       cost: control.value.min<control.value.price * control.value.value?control.value.price * control.value.value:control.value.min\n//   //     });\n//   //   } else if(control.value.fix) {\n//   //     control.patchValue({cost: (control.value.price * control.value.value)+control.value.fix});\n//   //   } else {\n//   //     control.patchValue({cost: control.value.price * control.value.value});\n//   //   }\n//   // }\n\n//   calckCost(control:any){\n//     control.patchValue({\n//       value: control.value.cost,\n//       price: 1,\n//     });\n//   }\n//   calckTotalCost(){\n//     // let cost=0;\n//     let cost:any[]=[];\n//     // this.rateForm.value.values.forEach((v:any)=>{\n//     //   if(v.select)cost=cost+v.cost\n//     // });\n//     this.rateForm.value.values.forEach((v:any)=>{\n//       if(v.select){\n//         cost.push(v.cost)\n//       }\n//     });\n//     let sum = this.calculationsService.calculateSum(cost);\n//     this.rateForm.patchValue({ total_cost:sum });\n//   }\n//   // Datepicker multy\n//   returnSelectDateText(){\n//     let text='';\n//     let dateOnj:any=[];\n//     this.rateForm.value.nearest_flight?.forEach((e:any)=>{\n//       const date = new Date(e);\n//       const dateTest ={\n//         day: date.toLocaleString('en-US', { day: 'numeric' }),\n//         mount: date.toLocaleString('en-US', { month: 'short' }),\n//         date: e,\n//       }\n//       dateOnj?.push(dateTest);\n//     })\n//     const sortedArray=dateOnj.sort((a:any, b:any) => new Date(a.date) > new Date(b.date)? 1 : -1);\n//     sortedArray?.forEach((i:any,index:number)=>{\n//       let ind=index+1;\n//       if(sortedArray[ind]?.mount===i.mount){\n//         text= text + i.day + ',';\n//       } else {\n//         text= text + i.day + ' ' + i.mount + (sortedArray.length==ind?'':', ');\n//       }\n//     });\n//     return text;\n//   }\n//   isSelectedDate = (event: any) => {\n//     // const dayOfWeek = new Date(event).getDay(); // 0 - , 1 - , 2 - ,  ..\n//     // if (dayOfWeek === 2) { // 2 - \n//     //   return \"disabled-date\"; //    \n//     // }\n\n//     const date=formatDate(event,'yyyy-MM-dd','en-US');\n//     return this.rateForm.value.nearest_flight?.find((x:any) => x == date) ? \"selected\" : '';\n//   }\n//   selectDate(event: any, calendar: any) {\n//     console.log(event,calendar);\n//     const date=formatDate(event,'yyyy-MM-dd','en-US');\n//     if(this.rateForm.value.nearest_flight===null) this.rateForm.value.nearest_flight=[];\n//     const index = this.rateForm.value.nearest_flight.findIndex((x:any) => x == date);\n//     if (index < 0) {\n//       this.rateForm.value.nearest_flight.push(date);\n//       const dayOfWeek=new Date(event).getDay();\n//       // const istestDate=!this.rateForm.value.departure_schedule?.find((x:any) => x == dayOfWeek)\n//       const istestDate=this.rateForm.value.departure_schedule?.find((x:any) =>{\n//         if(dayOfWeek==0&&x==7){\n//           x=0;\n//           return x == dayOfWeek;\n//         } else {\n//           return x == dayOfWeek;\n//         }\n//       })\n//       // const istestDate=dayOfWeek!=0\n//       //   ?this.rateForm.value.departure_schedule?.find((x:any) => x == dayOfWeek)\n//       //   :this.rateForm.value.departure_schedule?.find((x:any) => 0 == dayOfWeek)\n//       if(!istestDate){\n//         this.snackBar.open(\n//           `     `,\n//           undefined,\n//           {\n//             duration: 2000,\n//             verticalPosition: 'top', //   \n//             horizontalPosition: 'center', //   \n//             panelClass: ['centered-snackbar'] //    \n//           }\n//         );\n//       }\n//     } else {\n//       this.rateForm.value.nearest_flight.splice(index, 1);\n//     }\n//     calendar.updateTodaysDate();\n//   }\n\n//   //  \n//   //  (airline and airline iata controls)\n//   private getTransportCarrier():void{\n//     this.transportService.transportCarrier({kind_id:this.requestKindId})\n//       .pipe(\n//         tap(transportCarrier => {\n\n\n//           if (!transportCarrier) {\n//             throw ({ error: { error_message: `  `} });\n//           }\n//         }),\n//         takeUntil(this._destroy$),\n//       )\n//       .subscribe({\n//         next: (transportCarrier) => {\n//           this.transportCarrier=transportCarrier;\n//         },\n//         error: (err) => {\n//           this.snackBar.open(`${err.error.error_message}: ` + err.error.error_message_description, undefined, this.snackBarWithShortDuration);\n//         }\n//       });\n//   }\n//   //  (route)\n//   private getTransportRoute():void{\n//       this.directionService.directionRoute({kind_id: this.requestKindId, arrival_city_id:this.request.arrival_city_id,departure_country_id:this.request.departure_country_id })\n//         .pipe(\n//           tap(transportRoute => {\n//             if (!transportRoute) {\n//               throw ({ error: { error_message: `  `} });\n//             }\n//           }),\n//           takeUntil(this._destroy$),\n//         )\n//         .subscribe({\n//           next: (transportRoute) => {\n//             this.transportRoute=transportRoute;\n//           },\n//           error: (err) => {\n//             this.snackBar.open(`${err.error.error_message}: ` + err.error.error_message_description, undefined, this.snackBarWithShortDuration);\n//           }\n//         });\n//     }\n//   // private getTransportRoute():void{\n//   //   this.transportService.transportRoute({kind_id:this.requestKindId})\n//   //     .pipe(\n//   //       tap(transportRoute => {\n//   //         if (!transportRoute) {\n//   //           throw ({ error: { error_message: `  `} });\n//   //         }\n//   //       }),\n//   //       takeUntil(this._destroy$),\n//   //     )\n//   //     .subscribe({\n//   //       next: (transportRoute) => {\n//   //         this.transportRoute=transportRoute;\n//   //       },\n//   //       error: (err) => {\n//   //         this.snackBar.open(`  : ` + err.error.error_message, undefined, this.snackBarWithShortDuration);\n//   //       }\n//   //     });\n//   // }\n\n//   // \n//     // private getContractor():void{\n//     //   this.contractorService.contractorList()\n//     //     .pipe(\n//     //       tap(contractor => {\n//     //         console.log(contractor);\n\n//     //         if (!contractor) {\n//     //           throw ({ error: { error_message: `  `} });\n//     //         }\n//     //       }),\n//     //       takeUntil(this._destroy$),\n//     //     )\n//     //     .subscribe({\n//     //       next: (contractor) => {\n//     //         this.contractorList=contractor.items;\n//     //         if(this.rate){\n//     //           this.setContractorName(this.rate.contractor_id);\n//     //         }\n\n//     //       },\n//     //       error: (err) => {\n//     //         this.snackBar.open(`  : ` + err.error.error_message, undefined, this.snackBarWithShortDuration);\n//     //       }\n//     //     });\n//     // }\n// }\n","<form [formGroup]=\"rateForm\">\n\n  <div class=\"form-row bg\">\n    <div class=\"rate-block-title\">\n      <div class=\"form-row-title color-blue\">Rates</div>\n\n      <label class=\"radio\">\n        <input type=\"radio\" value=\"detail\" formControlName=\"rate_type\" (change)=\"onRateTypeChange()\">\n        <i></i>\n        <span>With Details</span>\n      </label>\n\n      <label class=\"radio\">\n        <input type=\"radio\" value=\"nodetail\" formControlName=\"rate_type\" (change)=\"onRateTypeChange()\">\n        <i></i>\n        <span>With single Amount</span>\n      </label>\n    </div>\n\n    <div class=\"rate_labels\">\n      <div *ngFor=\"let rate of rates; let i=index\"\n        [ngClass]=\"{'active-rate':i===currentRateNumber}\"\n        (click)=\"onChangeRate(i)\"\n        class=\"rate_label\"\n      >\n        Rate #{{i+1}} ({{rate?.carrier_name}})\n      </div>\n      <button class=\"btn-add-rate rate_labels-btns\" (click)=\"onAddRate()\">\n        <span class=\"icon-btn-plus\"></span>Add Rate\n      </button>\n      <button class=\"btn-dup-rate rate_labels-btns\" (click)=\"onDuplicateRate()\">\n        <span class=\"icon-btn-plus\"></span>Duplicate Rate\n      </button>\n      <button class=\"btn-del-rate rate_labels-btns\" (click)=\"onDeleteRate()\">\n        <span class=\"icon-btn-del\"></span>Delete Rate\n      </button>\n    </div>\n  </div>\n\n  <div class=\"form-row rate\">\n    <div class=\"form-item-layout\">\n      <div class=\"form-item i10\">\n        <div class=\"form-label\">Chargeable weight:</div>\n        <div class=\"form-data\">\n          <span class=\"kg\">\n            <input type=\"text\" readonly [value]=\"weight\">kg\n          </span>\n        </div>\n      </div>\n\n      <div class=\"form-item\" style=\"width: 105px;\">\n        <div class=\"form-label\">Airline (iata):</div>\n        <div class=\"form-data\">\n          <input\n            type=\"text\"\n            style=\"text-transform: uppercase\"\n            formControlName=\"carrier_name\"\n            [matAutocomplete]=\"carrier_name\"\n          >\n          <mat-autocomplete autoActiveFirstOption #carrier_name=\"matAutocomplete\">\n            <mat-option *ngFor=\"let route of filterIata()\" [value]=\"route.iata\">{{route.iata}}</mat-option>\n          </mat-autocomplete>\n        </div>\n      </div>\n\n      <div class=\"form-item\">\n        <div class=\"form-label\">Airline:</div>\n        <div class=\"form-data\">\n          <input type=\"text\"\n            formControlName=\"carrier_desc\"\n            [readonly]=\"getAirlineName(rateForm.value.carrier_name)!=''\"\n            [value]=\"getAirlineName(rateForm.value.carrier_name)\"\n          >\n        </div>\n      </div>\n\n      <div class=\"form-item\">\n        <div class=\"form-label\">Route:</div>\n        <div class=\"form-data\">\n          <input\n            type=\"text\"\n            style=\"text-transform: uppercase\"\n            formControlName=\"route_name\"\n            [matAutocomplete]=\"route\"\n          >\n          <mat-autocomplete autoActiveFirstOption #route=\"matAutocomplete\">\n            <mat-option (onSelectionChange)=\"onRouteChange(route)\" *ngFor=\"let route of filterRoutes()\" [value]=\"route.name\">{{route.name}}</mat-option>\n          </mat-autocomplete>\n        </div>\n      </div>\n\n      <div class=\"form-item\">\n        <div class=\"form-label\">The departure schedule:</div>\n        <div class=\"form-data departure-schedule\">\n          <mat-form-field appearance=\"outline\" class=\"ui-select\">\n            <mat-select formControlName=\"departure_schedule\" multiple>\n              <mat-option\n                *ngFor=\"let day of daysOfTheWeek;\"\n                [value]=\"day.id\"\n                >\n                {{ day.day }}\n              </mat-option>\n            </mat-select>\n          </mat-form-field>\n        </div>\n      </div>\n\n      <div class=\"form-item\">\n        <div class=\"form-label\">The nearest flight etd:</div>\n        <div class=\"form-data\">\n          <button class=\"calendar\" [matMenuTriggerFor]=\"menu\">\n            <div class=\"calendar-value\">{{getSelectedDateText()}}</div>\n            <div class=\"calendar-icon\"></div>\n          </button>\n          <mat-menu #menu=\"matMenu\">\n            <div (click)=\"$event.stopPropagation()\">\n              <mat-calendar\n                #calendar\n                (selectedChange)=\"onDateSelect($event,calendar)\"\n                [dateClass]=\"dateClass\"\n                style=\"width: 206px;\"\n                >\n              </mat-calendar>\n            </div>\n          </mat-menu>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"form-item-layout\">\n      <div class=\"form-item w110\" formGroupName=\"transit_time\">\n        <div class=\"form-label\">Transit time from:</div>\n        <div class=\"form-data\">\n          <input type=\"number\" formControlName=\"transit_time_from\">\n        </div>\n      </div>\n\n      <div class=\"form-item w110\" formGroupName=\"transit_time\">\n        <div class=\"form-label\">Transit time to:</div>\n        <div class=\"form-data\">\n          <input type=\"number\" formControlName=\"transit_time_to\">\n        </div>\n      </div>\n\n      <div class=\"form-item w110\">\n        <div class=\"form-label\">urrency Rate:</div>\n        <div class=\"form-data\">\n          <mat-form-field appearance=\"outline\" class=\"ui-select\">\n            <mat-select formControlName=\"currency\">\n              <mat-option\n                *ngFor=\"let currencyItem of currency;\"\n                [value]=\"currencyItem.id\"\n                >\n                {{ currencyItem.code }}\n              </mat-option>\n            </mat-select>\n          </mat-form-field>\n        </div>\n      </div>\n\n      <div class=\"form-item\" style=\"width: 150px; flex-grow: 0;\">\n        <div class=\"form-label\">The Rate available until:</div>\n        <div class=\"form-data\">\n          <input class=\"data-piker\" formControlName=\"valid_time\" [matDatepicker]=\"picker\" (click)=\"picker.open()\" (dateChange)=\"onValidChange()\" >\n          <mat-datepicker #picker></mat-datepicker>\n        </div>\n      </div>\n    </div>\n\n    <!-- DETAIL LAYOUT -->\n    <div class=\"charges\" *ngIf=\"rateForm.value.rate_type==='detail'\">\n      <div style=\"width: 70%; padding-right: 30px; border-right: 1px dashed #E0E5EB; margin-right: 30px;\">\n        <div class=\"form-block-sub-title\">The rate includes following charges</div>\n        <div formArrayName=\"values\" *ngFor=\"let chargeValue of charges.controls; let i = index;\">\n          <div [formGroupName]=\"i\" *ngIf=\"chargeValue.value.select\">\n            <div class=\"included-fees\">\n              <label style=\"display: flex;\">\n                <input type=\"checkbox\" [checked]=\"chargeValue.value.select\" formControlName=\"select\">\n                <i></i>\n                <span class=\"charges-title\">{{getChargeTitle(chargeValue.value.field)}}</span>\n              </label>\n\n              <!-- 1) inputs with min -->\n              <div *ngIf=\"hasMin(chargeValue.value.field) && !hasComment(chargeValue.value.field)\" class=\"input-box\">\n                <div class=\"form-item charges-values br\">\n                  <div class=\"form-data\">\n                    <span class=\"unit\">Min {{rateChar}}:</span>\n                    <input type=\"number\" class=\"values-input\" formControlName=\"min\" (input)=\"calculateCharge(chargeValue)\">\n                  </div>\n                </div>\n\n                <div class=\"form-item charges-values\">\n                  <div class=\"form-data\">\n                    <input type=\"number\" class=\"values-input\" (input)=\"calculateCharge(chargeValue)\" formControlName=\"price\">\n                    <span class=\"unit\">{{rateChar}}/{{getChargeUnit(chargeValue.value.field)}}</span>\n                  </div>\n                </div>\n\n                <div class=\"cross\"></div>\n\n                <div class=\"form-item charges-values\" *ngIf=\"getChargeUnit(chargeValue.value.field)!=='kg'\">\n                  <div class=\"form-data\">\n                    <input type=\"number\" class=\"values-input\" (input)=\"calculateCharge(chargeValue)\" formControlName=\"value\">\n                    <span class=\"unit\">{{getChargeUnit(chargeValue.value.field)}}</span>\n                  </div>\n                </div>\n\n                <div class=\"form-item charges-values\" *ngIf=\"getChargeUnit(chargeValue.value.field)==='kg'\">\n                  <div class=\"form-data\">\n                    <input type=\"number\" class=\"values-input\" readonly formControlName=\"value\">\n                    <span class=\"unit\">{{getChargeUnit(chargeValue.value.field)}}</span>\n                  </div>\n                </div>\n\n                <div class=\"equal\"></div>\n\n                <div class=\"form-item charges-values\">\n                  <div class=\"form-data\">\n                    <input type=\"number\" class=\"values-input\" readonly formControlName=\"cost\">\n                    <span class=\"unit\">{{rateChar}}</span>\n                  </div>\n                </div>\n              </div>\n\n              <!-- 2) standard inputs -->\n              <div *ngIf=\"!hasMin(chargeValue.value.field) && !hasComment(chargeValue.value.field) && getChargeUnit(chargeValue.value.field)\" class=\"input-box\">\n                <div class=\"form-item charges-values\" *ngIf=\"hasFix(chargeValue.value.field)\">\n                  <div class=\"form-data\">\n                    <span class=\"unit\">Fix {{rateChar}}:</span>\n                    <input type=\"number\" class=\"values-input\" formControlName=\"fix\" (input)=\"calculateCharge(chargeValue)\">\n                  </div>\n                </div>\n\n                <span *ngIf=\"hasFix(chargeValue.value.field)\" style=\"text-align: center; margin: 0 5px; width: 11px; box-sizing: border-box;\">+</span>\n\n                <div class=\"form-item charges-values\">\n                  <div class=\"form-data\">\n                    <input type=\"number\" class=\"values-input\" (input)=\"calculateCharge(chargeValue)\" formControlName=\"price\">\n                    <span class=\"unit\">{{rateChar}}/{{getChargeUnit(chargeValue.value.field)}}</span>\n                  </div>\n                </div>\n\n                <div class=\"cross\"></div>\n\n                <div class=\"form-item charges-values\" *ngIf=\"getChargeUnit(chargeValue.value.field)!=='kg'\">\n                  <div class=\"form-data\">\n                    <input type=\"number\" class=\"values-input\" (input)=\"calculateCharge(chargeValue)\" formControlName=\"value\">\n                    <span class=\"unit\">{{getChargeUnit(chargeValue.value.field)}}</span>\n                  </div>\n                </div>\n\n                <div class=\"form-item charges-values\" *ngIf=\"getChargeUnit(chargeValue.value.field)==='kg'\">\n                  <div class=\"form-data\">\n                    <input type=\"number\" class=\"values-input\" readonly formControlName=\"value\">\n                    <span class=\"unit\">{{getChargeUnit(chargeValue.value.field)}}</span>\n                  </div>\n                </div>\n\n                <div class=\"equal\"></div>\n\n                <div class=\"form-item charges-values\">\n                  <div class=\"form-data\">\n                    <input type=\"number\" class=\"values-input\" readonly formControlName=\"cost\">\n                    <span class=\"unit\">{{rateChar}}</span>\n                  </div>\n                </div>\n              </div>\n\n              <!-- 3) cost + comment -->\n              <div *ngIf=\"!hasMin(chargeValue.value.field) && hasComment(chargeValue.value.field) && !getChargeUnit(chargeValue.value.field)\" class=\"input-box\" style=\"width: 70%;\">\n                <div class=\"form-item\" style=\"margin-right: 10px;\">\n                  <div class=\"form-data\">\n                    <input type=\"text\" formControlName=\"comment\">\n                  </div>\n                </div>\n\n                <div class=\"form-item charges-values\">\n                  <div class=\"form-data\">\n                    <input type=\"number\" class=\"values-input\" (input)=\"calculateCostDirectly(chargeValue)\" formControlName=\"cost\">\n                    <span class=\"unit\">{{rateChar}}</span>\n                  </div>\n                </div>\n              </div>\n\n              <!-- 4) only cost -->\n              <div *ngIf=\"!hasMin(chargeValue.value.field) && !hasComment(chargeValue.value.field) && !getChargeUnit(chargeValue.value.field)\" class=\"input-box\">\n                <div class=\"form-item charges-values\">\n                  <div class=\"form-data\">\n                    <input type=\"number\" class=\"values-input\" (input)=\"calculateCostDirectly(chargeValue)\" formControlName=\"cost\">\n                    <span class=\"unit\">{{rateChar}}</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div style=\"width: 30%;\">\n        <div class=\"form-block-sub-title\">Additional charges</div>\n        <div formArrayName=\"values\" class=\"additional\" *ngFor=\"let chargeValue of charges.controls; let i = index;\">\n          <div [formGroupName]=\"i\" *ngIf=\"!chargeValue.value.select\">\n            <div class=\"list-charges\">\n              <label style=\"display: flex;\">\n                <input type=\"checkbox\" formControlName=\"select\">\n                <i></i>\n                <span class=\"charges-title\">{{getChargeTitle(chargeValue.value.field)}}</span>\n              </label>\n\n              <div class=\"form-item charges-values\">\n                <div class=\"form-data\">\n                  <input type=\"number\" class=\"values-input\" formControlName=\"cost\">\n                  <span class=\"unit\">{{rateChar}}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- NO DETAIL LAYOUT -->\n    <div class=\"charges\" *ngIf=\"rateForm.value.rate_type==='nodetail'\">\n      <div style=\"width: 50%; border-right: 1px dashed #E0E5EB;\">\n        <div class=\"form-block-sub-title\">The rate includes following charges</div>\n        <div formArrayName=\"values\" *ngFor=\"let chargeValue of charges.controls; let i = index;\">\n          <div [formGroupName]=\"i\" *ngIf=\"chargeValue.value.select\">\n            <div class=\"included-fees\">\n              <label>\n                <input type=\"checkbox\" [checked]=\"chargeValue.value.select\" formControlName=\"select\">\n                <i></i>\n                <span class=\"charges-title\">{{getChargeTitle(chargeValue.value.field)}}</span>\n              </label>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div style=\"width: 50%; padding-left: 40px;\">\n        <div class=\"form-block-sub-title additional\">Additional charges</div>\n        <div formArrayName=\"values\" *ngFor=\"let chargeValue of charges.controls; let i = index;\">\n          <div [formGroupName]=\"i\" *ngIf=\"!chargeValue.value.select\">\n            <div class=\"list-charges\">\n              <label style=\"display: flex;\">\n                <input type=\"checkbox\" formControlName=\"select\">\n                <i></i>\n                <span class=\"charges-title\">{{getChargeTitle(chargeValue.value.field)}}</span>\n              </label>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"total\">\n      <div class=\"total-detail\" *ngIf=\"rateForm.value.rate_type==='detail'\">\n        <div>Total:</div>\n        <div class=\"color-red\">{{rateForm.value.total_cost}}</div>\n        <div class=\"color-red\">{{rateChar}}</div>\n      </div>\n\n      <div class=\"total-nodetail\" *ngIf=\"rateForm.value.rate_type==='nodetail'\">\n        <div>Total, {{rateCode}}:</div>\n        <input type=\"number\" class=\"total-cost\" formControlName=\"total_cost\">\n      </div>\n\n      <label>\n        <input type=\"checkbox\" formControlName=\"profit_include\">\n        <i></i>\n        <span class=\"charges-title\">Profit is included</span>\n      </label>\n    </div>\n\n    <div class=\"form-item-layout\" style=\"margin-top: 40px; width: 100%;\">\n      <div class=\"form-item charges-values\" style=\"width: 100%;\">\n        <div class=\"form-data\" style=\"width: 100%;\">\n          <input type=\"text\" class=\"values-input\" formControlName=\"comment\" placeholder=\"Your Comment...\" style=\"max-width: 100%;\">\n        </div>\n      </div>\n    </div>\n  </div>\n</form>\n\n<ng-template #deleteRateDialogRef let-data>\n  <h1 mat-dialog-title>Delete rate?</h1>\n  <div mat-dialog-content>After deletion, restoration will not be possible</div>\n  <div mat-dialog-actions align=\"end\">\n    <button mat-button [mat-dialog-close]=\"true\" cdkFocusInitial>Delete</button>\n    <button mat-button mat-dialog-close>Cancel</button>\n  </div>\n</ng-template>\n","import { Component, OnDestroy, OnInit, ViewEncapsulation } from '@angular/core';\nimport { FormArray, FormBuilder, FormGroup, ReactiveFormsModule } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Subject, takeUntil, tap } from 'rxjs';\nimport { CargoService, CustomerService, DirectionService, FileService, RequestService, SystemService, TransportService } from 'src/app/api/services';\nimport { CommonModule, Location } from '@angular/common';\nimport { CityService } from '../../services/city.service';\nimport { CountryService } from '../../services/country.service';\nimport { MatSnackBar, MatSnackBarConfig } from '@angular/material/snack-bar';\nimport { environment } from '../../../../environments/environment';\nimport { RateEditorComponent } from '../rate-editor/rate-editor.component';\n\n@Component({\n  selector: 'app-request-rate',\n  templateUrl: './request-rate.component.html',\n  styleUrls: ['./request-rate.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n})\n\nexport class RequestRateComponent implements OnInit, OnDestroy {\n  //\n  id: number=0;\n  // \n  snackBarWithShortDuration: MatSnackBarConfig = { duration: 4000 };\n  snackBarWithLongDuration: MatSnackBarConfig = { duration: 8000 };\n  //\n  private _destroy$ = new Subject();\n  // \n  production = environment.production;\n  requestForm: FormGroup;\n  request: any;\n  files:any\n  currentRateNumber:number=0;\n  chargeModel:any=[];\n  transportCarrier:any=[];\n  currencyList:any;\n  readonly xlsxMimeType = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';\n  //\n  constructor(\n    private route: ActivatedRoute,\n    private fb: FormBuilder,\n    private requestService: RequestService,\n    private snackBar: MatSnackBar,\n    private fileSevice: FileService,\n    private systemService: SystemService\n  ) {\n    this.requestForm = this.fb.group({\n      uid: [,[]],\n      rates: fb.array([], []),\n    });\n  }\n  //  :\n  ngOnDestroy(): void {\n    this._destroy$.next(null);\n    this._destroy$.complete();\n  }\n  ngOnInit(): void {\n    const uid = this.route.snapshot.paramMap.get('uid');\n    this.requestForm.patchValue({\n      uid:uid\n    })\n    this.getRequestRates(uid);\n    this.getCurrency()\n  }\n\n  //   \n  removeRate(i: number): void {\n    this.rates.removeAt(i);\n    this.requestForm.markAsTouched();\n    this.currentRateNumber=this.rates.length-1;\n    if(this.rates.length<1){\n      this.addRate()\n    }\n  }\n  addRate() {\n    if(this.rates.length<8){\n      this.rates.push(this.fb.control({\n        currency: this.requestForm.value.rates[this.currentRateNumber]?.currency,\n        valid_time: this.requestForm.value.rates[this.currentRateNumber]?.valid_time,\n      }));\n      this.currentRateNumber=this.rates.length-1;\n      this.requestForm.markAsTouched();\n    }\n  }\n  duplicateRate(){\n    this.rates.push(this.fb.control(this.requestForm.value.rates[this.currentRateNumber]));\n    this.requestForm.markAsTouched();\n  }\n  get rates() {\n    return <FormArray>this.requestForm.get('rates');\n  }\n\n  //  :\n  indexRateChange(e:any){\n    this.currentRateNumber=e;\n  }\n  copyDispatchText(){\n    window.navigator.clipboard.writeText(`${this.request.departure_country_name}, ${this.request.departure_city_name}, ${this.request.departure_address}, ${this.request.departure_point_name}`)\n    this.snackBar.open(`Address copied: ` + `${this.request.departure_country_name}, ${this.request.departure_city_name}, ${this.request.departure_address}, ${this.request.departure_point_name}` , undefined, this.snackBarWithLongDuration);\n  }\n  copyDestinationText(){\n    window.navigator.clipboard.writeText(`${this.request.arrival_country_name}, ${this.request.arrival_city_name}, ${this.request.arrival_address}, ${this.request.arrival_point_name}`)\n    this.snackBar.open(`Address copied: ` + `${this.request.arrival_country_name}, ${this.request.arrival_city_name}, ${this.request.arrival_address}, ${this.request.arrival_point_name}`, undefined, this.snackBarWithLongDuration);\n  }\n\n  getCurrency(){\n    this.systemService.systemCurrency().pipe(\n      tap((currencyList) => {\n      }),\n      takeUntil(this._destroy$)\n    ).subscribe({\n      next: (currencyList) => {\n        console.log('currencyList',currencyList);\n        this.currencyList=currencyList.current;\n      },\n      error: (err) => {\n        console.log('    ');\n      }\n    });\n  }\n\n  //  :\n  getFile(id:number):void{\n    this.fileSevice.fileDownload({id: id})\n      .pipe(\n        tap((file)=> {\n          // if (!file) {\n          //   throw ({ error: { error_message: `  ` } });\n          // }\n        }), takeUntil(this._destroy$))\n      .subscribe({\n        next: ({name, data}) => {\n          const dataUri = `data:${this.xlsxMimeType};base64,${data}`;\n          const a = document.createElement('a');\n          a.href = dataUri;\n          a.download = name!;\n          a.click();\n        },\n        error: (err) => {\n          this.snackBar.open(`  : ` + err.error.error_message, undefined, this.snackBarWithShortDuration)}\n      });\n  }\n\n  //    \n  private getRequestRates(uid:any){\n    this.requestService.requestRates({uid:uid})\n      .pipe(\n        tap((rates)=> {\n          console.log('getRequestRates', rates);\n          if (!rates) throw ({ error: { error_message: `  ` } });\n          if(!rates.rates)this.rates.push(this.fb.control({}));\n          rates.rates?.forEach((e:any) => {\n            this.addRate();\n            this.requestForm.patchValue(rates);\n\n          });\n        }),\n        takeUntil(this._destroy$))\n      .subscribe({\n        next: (rates:any) => {\n          this.chargeModel=rates.charges;\n          this.request=rates;\n        },\n        error: (err) => {\n          this.snackBar.open(`${err.error?.error_message}: ` + err.error?.error_message_description, undefined, this.snackBarWithShortDuration);\n        }\n      });\n  }\n  // \n  saveRequestRates(){\n    console.log(this.requestForm.value);\n    this.requestService.requestRatesSave({body:this.requestForm.value})\n      .pipe(\n        tap((res)=> {\n          console.log(res);\n          if (!res) {\n            throw ({ error: { error_message: ` ` } });\n          }\n        }),\n        takeUntil(this._destroy$))\n      .subscribe({\n        next: (res:any) => {\n          this.snackBar.open(\n            this.requestForm.value.rates.length>1\n            ?`    ${this.requestForm.value.rates.length}-   `\n            :`  `,\n            undefined,\n            {\n              duration: 2000,\n              verticalPosition: 'top', //   \n              horizontalPosition: 'center', //   \n              panelClass: ['centered-snackbar'] //    \n            }\n          );\n          // this.snackBar.open(` `, undefined, this.snackBarWithLongDuration);\n        },\n        error: (err) => {\n          this.snackBar.open(`${err.error.error_message}: ` + err.error.error_message_description, undefined, this.snackBarWithShortDuration);\n        }\n      });\n  }\n}\n","<div class=\"logo-box\">\n  <div>\n\n  </div>\n</div>\n\n<div class=\"edit-form title\">\n  Rate Request # {{request?.id}}\n  <div class=\"time-add\">\n    Date:\n    <span>{{request?.time_add}}</span>\n  </div>\n</div>\n\n<form class=\"edit-form\" [formGroup]=\"requestForm\">\n  <div class=\"form-block\">\n\n    <div class=\"form-row df\">\n      <div class=\"form-col\">\n\n        <div class=\"form-col-title\">Route of Transportation</div>\n\n        <div class=\"form-item-layout\">\n          <div class=\"form-item\">\n            <div class=\"form-label\">Dispatch</div>\n            <div class=\"form-data\">\n              <div>\n                {{request?.departure_country_name}},\n                {{request?.departure_city_name}},\n                {{request?.departure_address}}\n              </div>\n              <div class=\"transport-point\">{{request?.departure_point_name}}</div>\n            </div>\n\n            <div class=\"copy-map\">\n              <button (click)=\"copyDispatchText()\" class=\"btn-copy\">Copy</button>\n              <a class=\"btn-map\"\n                title=\"Open dispatch address in Google maps\"\n                href=\"https://www.google.com/maps/search/?api=1&amp;query={{request?.departure_country_name}},{{request?.departure_city_name}},{{request?.departure_address}},{{request?.departure_point_name}}\"\n                target=\"_blank\">\n                On map\n              </a>\n            </div>\n\n          </div>\n        </div>\n\n        <div class=\"form-item-layout\">\n          <div class=\"form-item\">\n            <div class=\"form-label\">Destination</div>\n            <div class=\"form-data\">\n              <div>\n                {{request?.arrival_country_name}},\n                {{request?.arrival_city_name}},\n                {{request?.arrival_address}}\n              </div>\n              <div class=\"transport-point\">{{request?.arrival_point_name}}</div>\n            </div>\n            <div class=\"copy-map\">\n              <button (click)=\"copyDestinationText()\" class=\"btn-copy\">Copy</button>\n              <a class=\"btn-map\"\n                title=\"Open destination address in Google maps\"\n                href=\"https://www.google.com/maps/search/?api=1&amp;query={{request?.arrival_country_name}},{{request?.arrival_city_name}},{{request?.arrival_address}},{{request?.arrival_point_name}}\"\n                target=\"_blank\"\n                > On map\n              </a>\n            </div>\n\n          </div>\n        </div>\n\n      </div>\n\n      <div class=\"form-col\">\n\n        <div class=\"form-col-title\">Cargo Details</div>\n\n        <div class=\"form-item-layout\">\n          <div class=\"form-item\">\n            <div class=\"form-label\">Type of cargo:</div>\n            <div class=\"form-data\">\n              <div>{{request?.cargo_type_name}}</div>\n            </div>\n          </div>\n          <div class=\"form-item\">\n            <div class=\"form-label\">Cargo name:</div>\n            <div class=\"form-data\">\n              <div>{{request?.cargo_description}}</div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"form-item-layout\">\n          <div class=\"form-item\" *ngIf=\"request?.cargo_readiness\">\n            <div class=\"form-label\">Cargo readiness:</div>\n            <div class=\"form-data\">\n              <div>{{request?.cargo_readiness}}</div>\n            </div>\n          </div>\n          <div class=\"form-item\">\n            <div class=\"form-label\">Incoterms</div>\n            <div class=\"form-data\">\n              <div>{{request?.incoterms_name}} {{request?.incoterms_city_name}}</div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"form-item-layout\">\n          <div class=\"form-item\">\n            <div class=\"form-label\">Details total:</div>\n            <div class=\"form-data\">\n              <div class=\"details-total\">\n                {{request?.cargo_places_count}}<span> pcs </span>\n                <span class=\"space\">/</span>\n                {{request?.cargo_places_volume}}<span> m<sup class=\"sup\">3</sup></span>\n                <span class=\"space\">/</span>\n                {{request?.cargo_places_weight}}<span> kg</span>\n                <span class=\"space\">/</span>\n                <!-- {{request?.cargo_places_density  | number:'1.0-1'}}<span> kg/m<sup class=\"sup\">3</sup></span> -->\n                 {{request?.cargo_places_density }}<span> kg/m<sup class=\"sup\">3</sup></span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"form-item-layout\" *ngIf=\"request?.cargo_condition_carriage\">\n          <div class=\"form-item\">\n            <div class=\"form-label\">Conditions of carriage:</div>\n            <div class=\"form-data\">\n              <div>{{request?.cargo_condition_carriage}} </div>\n            </div>\n          </div>\n        </div>\n\n      </div>\n\n      <div class=\"form-col\" style=\"display: flex; flex-direction: column;\">\n        <div class=\"form-col-title\">Dimensions</div>\n        <textarea readonly style=\"border: none; flex-grow: 1;\">{{request?.cargo_dimensions}}</textarea>\n      </div>\n\n    </div>\n\n    <div class=\"form-row\" *ngIf=\"request?.comment\">\n      <div class=\"form-row-title\">Comment</div>\n      <div class=\"comment\">{{request?.comment}}</div>\n    </div>\n\n    <div class=\"form-row\" *ngIf=\"request?.documents_file?.length>0 || request?.cargo_file?.length>0\">\n      <div class=\"form-row-title\">Attached Files</div>\n      <div class=\"form-item-layout wrap\">\n        <div class=\"file-box\"\n          *ngFor=\"let documentsFile of request?.documents_file;\"\n          (click)=\"getFile(documentsFile.id)\"\n        >\n          {{documentsFile?.file_name}}\n        </div>\n\n        <div class=\"file-box\"\n          *ngFor=\"let cargoFile of request?.cargo_file;\"\n          (click)=\"getFile(cargoFile.id)\"\n        >\n          {{cargoFile?.file_name}}\n        </div>\n      </div>\n    </div>\n\n    <div class=\"form-row rate\" formArrayName=\"rates\">\n      <div *ngFor=\"let rate of rates.controls; let i=index\" >\n        <app-rate-editor\n          (removeRate)=\"removeRate(i)\"\n          (addRate)=\"addRate()\"\n          (indexRateChange)=\"indexRateChange($event)\"\n          (duplicateRate)=\"duplicateRate()\"\n          [ngClass]=\"{'dn':i!==currentRateNumber}\"\n          [formControlName]=\"i\"\n          [requestKindId]=\"request.transport_kind_id\"\n          [rates]=\"requestForm.value.rates\"\n          [currentRateNumber]=\"currentRateNumber\"\n          [chargeModel]=\"chargeModel\"\n          [weight]=\"request.cargo_places_paid_weight\"\n          [request]=\"request\"\n          [currency]=\"currencyList\"\n        >\n        </app-rate-editor>\n      </div>\n    </div>\n\n    <div class=\"form-row bg\" style=\"display: flex;justify-content: end;\">\n      <button type=\"submit\" class=\"btn-save-rates\" (click)=\"saveRequestRates()\">\n        <span class=\"icon-btn-save-rates\"></span>\n        Send Rates\n      </button>\n    </div>\n\n  </div>\n</form>\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { SharedModule } from 'src/app/shared/shared.module';\nimport { ReportComponent } from '../../components/report/report.component';\nimport { RateEditorComponent } from '../../components/rate-editor/rate-editor.component';\nimport { RequestRateComponent } from '../../components/request-rate/request-rate.component';\n\nconst routes: Routes = [\n  {\n    path: 'request-rates/:uid',\n    component: RequestRateComponent,\n    title: 'Rates',\n  },\n];\n\n@NgModule({\n  declarations: [\n    RequestRateComponent,\n    RateEditorComponent,\n  ],\n  imports: [\n    RouterModule.forChild(routes),\n    SharedModule,\n  ],\n})\nexport class PublicModule { }\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CalculationsService {\n\n  constructor() { }\n\n  /**\n   *      \n   * @param values      \n   * @returns     2   \n   */\n  calculateSum(values: (number | string | null | undefined)[]): number {\n    const numbers = this._convertToNumbers(values);\n    const sum = numbers.reduce((acc, curr) => this._preciseAdd(acc, curr), 0);\n    return this._roundToTwoDecimals(sum);\n  }\n\n  /**\n   *     \n   * @param values      \n   * @returns     2   \n   */\n  calculateProduct(values: (number | string | null | undefined)[]): number {\n    const numbers = this._convertToNumbers(values);\n    \n    //        -  0\n    if (numbers.length === 0 || numbers.every(num => num === 0)) {\n      return 0;\n    }\n\n    const product = numbers.reduce((acc, curr) => this._preciseMultiply(acc, curr), 1);\n    return this._roundToTwoDecimals(product);\n  }\n\n  /**\n   *        \n   * @param price   ()\n   * @param value \n   * @param options   {min?: number, fix?: number}\n   * @returns      2   \n   */\n  calculateRate(\n    price: number | string | null | undefined,\n    value: number | string | null | undefined,\n    options: { min?: number | string | null; fix?: number | string | null } = {}\n  ): number {\n    const numPrice = this._safeConvertToNumber(price);\n    const numValue = this._safeConvertToNumber(value);\n    const numMin = options.min !== undefined ? this._safeConvertToNumber(options.min) : undefined;\n    const numFix = options.fix !== undefined ? this._safeConvertToNumber(options.fix) : undefined;\n\n    //  price  value  0    -  0\n    if (numPrice === 0 || numValue === 0) {\n      return 0;\n    }\n\n    let result = this._preciseMultiply(numPrice, numValue);\n\n    //    (     0)\n    if (numMin !== undefined && numMin !== 0 && result < numMin) {\n      result = numMin;\n    }\n\n    //    (     0)\n    if (numFix !== undefined && numFix !== 0) {\n      result = this._preciseAdd(result, numFix);\n    }\n\n    return this._roundToTwoDecimals(result);\n  }\n\n  // ==========   ==========\n\n  /**\n   *      \n   */\n  private _preciseAdd(a: number, b: number): number {\n    const aDecimals = (a.toString().split('.')[1] || '').length;\n    const bDecimals = (b.toString().split('.')[1] || '').length;\n    const maxDecimals = Math.max(aDecimals, bDecimals);\n    const factor = Math.pow(10, maxDecimals);\n    \n    return (a * factor + b * factor) / factor;\n  }\n\n  /**\n   *      \n   */\n  private _preciseMultiply(a: number, b: number): number {\n    const aDecimals = (a.toString().split('.')[1] || '').length;\n    const bDecimals = (b.toString().split('.')[1] || '').length;\n    const factor = Math.pow(10, aDecimals + bDecimals);\n    \n    const aInt = a * Math.pow(10, aDecimals);\n    const bInt = b * Math.pow(10, bDecimals);\n    \n    return (aInt * bInt) / factor;\n  }\n\n  /**\n   *   2   \n   */\n  private _roundToTwoDecimals(num: number): number {\n    //    -    \n    if (Number.isInteger(num)) {\n      return num;\n    }\n    return parseFloat((Math.round((num + Number.EPSILON) * 100) / 100).toFixed(2));\n  }\n\n  /**\n   *      \n   */\n  private _convertToNumbers(values: (number | string | null | undefined)[]): number[] {\n    return values.map(value => this._safeConvertToNumber(value));\n  }\n\n  /**\n   *       null/undefined/ \n   */\n  private _safeConvertToNumber(value: number | string | null | undefined): number {\n    if (value === null || value === undefined || value === '') {\n      return 0;\n    }\n\n    //    -   \n    if (typeof value === 'number') {\n      return value;\n    }\n\n    //       \n    const cleanedValue = value.toString()\n      .replace(/,/g, '.')\n      .replace(/\\s/g, '');\n\n    const num = parseFloat(cleanedValue);\n    return isNaN(num) ? 0 : num;\n  }\n}"],"names":["NG_VALUE_ACCESSOR","NG_VALIDATORS","EventEmitter","Subject","takeUntil","formatDate","i0","elementStart","listener","RateEditorComponent_div_16_Template_div_click_0_listener","restoredCtx","restoreView","_r19","i_r17","index","ctx_r18","nextContext","resetView","onChangeRate","text","elementEnd","property","pureFunction1","_c1","ctx_r0","currentRateNumber","advance","textInterpolate2","rate_r16","carrier_name","route_r20","iata","textInterpolate","RateEditorComponent_mat_option_55_Template_mat_option_onSelectionChange_0_listener","_r23","route_r21","$implicit","ctx_r22","onRouteChange","name","day_r24","id","textInterpolate1","day","currencyItem_r25","code","RateEditorComponent_div_101_div_4_div_1_div_7_div_12_Template_input_input_2_listener","_r39","chargeValue_r28","ctx_r37","calculateCharge","ctx_r35","getChargeUnit","value","field","element","ctx_r36","RateEditorComponent_div_101_div_4_div_1_div_7_Template_input_input_5_listener","_r44","ctx_r42","RateEditorComponent_div_101_div_4_div_1_div_7_Template_input_input_8_listener","ctx_r45","template","RateEditorComponent_div_101_div_4_div_1_div_7_div_12_Template","RateEditorComponent_div_101_div_4_div_1_div_7_div_13_Template","ctx_r31","rateChar","RateEditorComponent_div_101_div_4_div_1_div_8_div_1_Template_input_input_4_listener","_r54","ctx_r52","ctx_r48","RateEditorComponent_div_101_div_4_div_1_div_8_div_9_Template_input_input_2_listener","_r57","ctx_r55","ctx_r50","ctx_r51","RateEditorComponent_div_101_div_4_div_1_div_8_div_1_Template","RateEditorComponent_div_101_div_4_div_1_div_8_span_2_Template","RateEditorComponent_div_101_div_4_div_1_div_8_Template_input_input_5_listener","_r62","ctx_r60","RateEditorComponent_div_101_div_4_div_1_div_8_div_9_Template","RateEditorComponent_div_101_div_4_div_1_div_8_div_10_Template","ctx_r32","hasFix","RateEditorComponent_div_101_div_4_div_1_div_9_Template_input_input_6_listener","_r66","ctx_r64","calculateCostDirectly","ctx_r33","RateEditorComponent_div_101_div_4_div_1_div_10_Template_input_input_3_listener","_r69","ctx_r67","ctx_r34","RateEditorComponent_div_101_div_4_div_1_div_7_Template","RateEditorComponent_div_101_div_4_div_1_div_8_Template","RateEditorComponent_div_101_div_4_div_1_div_9_Template","RateEditorComponent_div_101_div_4_div_1_div_10_Template","i_r29","select","ctx_r30","getChargeTitle","hasMin","hasComment","RateEditorComponent_div_101_div_4_div_1_Template","i_r72","ctx_r73","chargeValue_r71","RateEditorComponent_div_101_div_8_div_1_Template","RateEditorComponent_div_101_div_4_Template","RateEditorComponent_div_101_div_8_Template","ctx_r10","charges","controls","i_r78","chargeValue_r77","ctx_r79","RateEditorComponent_div_102_div_4_div_1_Template","i_r82","ctx_r83","chargeValue_r81","RateEditorComponent_div_102_div_8_div_1_Template","RateEditorComponent_div_102_div_4_Template","RateEditorComponent_div_102_div_8_Template","ctx_r11","ctx_r12","rateForm","total_cost","ctx_r13","rateCode","RateEditorComponent","constructor","fb","calculationsService","transportService","directionService","snackBar","dialog","chargeModel","removeRate","addRate","indexRateChange","duplicateRate","transportCarrier","transportRoute","daysOfTheWeek","date_id","_destroy$","touched","onChange","onTouched","dateClass","event","date","toISOString","split","dates","nearest_flight","find","d","createForm","ngOnInit","initializeForm","loadTransportData","setupFormSubscriptions","ngOnDestroy","next","complete","ngOnChanges","changes","weight","updateWeightDependentCharges","rate_type","calculateTotalCost","writeValue","patchValue","emitEvent","registerOnChange","fn","registerOnTouched","validate","control","valid","get","currency","c","char","onDeleteRate","deleteRateDialogRef","open","afterClosed","subscribe","res","emit","onAddRate","onDuplicateRate","onRateTypeChange","resetChargeValues","route","transit_time","transit_time_from","days_min","transit_time_to","days_max","costValue","min","undefined","calculatedCost","price","Math","max","fix","cost","parseFloat","toFixed","filterIata","searchTerm","toLowerCase","replace","filter","option","includes","filterRoutes","route_name","getAirlineName","carrier","group","carrier_desc","comment","departure_schedule","num","profit_include","values","array","valid_time","initializeCharges","request","clear","existingValues","forEach","charge","existingValue","v","field_name","selectValue","requare","status","initialValue","unit","chargeGroup","valueChanges","pipe","push","getTransportCarrier","getTransportRoute","total","reduce","sum","roundedTotal","kind_id","requestKindId","carriers","error","err","showError","directionRoute","arrival_city_id","departure_country_id","routes","message","errorMsg","error_message_description","error_message","duration","fieldName","item","field_min","field_fix","field_comment","getSelectedDateText","length","formattedDates","map","dateObj","Date","getDate","month","toLocaleString","sort","a","b","getTime","result","nextDate","onDateSelect","calendar","currentDates","findIndex","splice","selectedDate","dayOfWeek","getDay","console","log","departureSchedule","isDateInSchedule","verticalPosition","horizontalPosition","panelClass","updateTodaysDate","onValidChange","directiveInject","i1","FormBuilder","i2","CalculationsService","i3","TransportService","DirectionService","i4","MatSnackBar","i5","MatDialog","selectors","viewQuery","RateEditorComponent_Query","rf","ctx","provide","multi","useExisting","NgOnChangesFeature","decls","vars","consts","template","RateEditorComponent_Template","RateEditorComponent_Template_input_change_6_listener","RateEditorComponent_Template_input_change_11_listener","RateEditorComponent_div_16_Template","RateEditorComponent_Template_button_click_17_listener","RateEditorComponent_Template_button_click_20_listener","RateEditorComponent_Template_button_click_23_listener","RateEditorComponent_mat_option_42_Template","RateEditorComponent_mat_option_55_Template","RateEditorComponent_mat_option_62_Template","RateEditorComponent_Template_div_click_73_listener","$event","stopPropagation","RateEditorComponent_Template_mat_calendar_selectedChange_74_listener","_r86","_r7","reference","RateEditorComponent_mat_option_93_Template","RateEditorComponent_Template_input_click_98_listener","_r9","RateEditorComponent_Template_input_dateChange_98_listener","RateEditorComponent_div_101_Template","RateEditorComponent_div_102_Template","RateEditorComponent_div_104_Template","RateEditorComponent_div_105_Template","RateEditorComponent_ng_template_115_Template","templateRefExtractor","rates","_r1","_r3","_r6","tap","environment","cargo_readiness","ctx_r1","cargo_condition_carriage","ctx_r2","RequestRateComponent_div_101_div_4_Template_div_click_0_listener","documentsFile_r7","ctx_r8","getFile","file_name","RequestRateComponent_div_101_div_5_Template_div_click_0_listener","_r12","cargoFile_r10","RequestRateComponent_div_101_div_4_Template","RequestRateComponent_div_101_div_5_Template","ctx_r3","documents_file","cargo_file","RequestRateComponent_div_103_Template_app_rate_editor_removeRate_1_listener","_r16","i_r14","ctx_r15","RequestRateComponent_div_103_Template_app_rate_editor_addRate_1_listener","ctx_r17","RequestRateComponent_div_103_Template_app_rate_editor_indexRateChange_1_listener","RequestRateComponent_div_103_Template_app_rate_editor_duplicateRate_1_listener","ctx_r19","_c0","ctx_r4","transport_kind_id","requestForm","cargo_places_paid_weight","currencyList","RequestRateComponent","requestService","fileSevice","systemService","snackBarWithShortDuration","snackBarWithLongDuration","production","xlsxMimeType","uid","snapshot","paramMap","getRequestRates","getCurrency","i","removeAt","markAsTouched","e","copyDispatchText","window","navigator","clipboard","writeText","departure_country_name","departure_city_name","departure_address","departure_point_name","copyDestinationText","arrival_country_name","arrival_city_name","arrival_address","arrival_point_name","systemCurrency","current","fileDownload","file","data","dataUri","document","createElement","href","download","click","requestRates","saveRequestRates","requestRatesSave","body","ActivatedRoute","RequestService","FileService","SystemService","RequestRateComponent_Template","RequestRateComponent_Template_button_click_24_listener","RequestRateComponent_Template_button_click_38_listener","RequestRateComponent_div_59_Template","RequestRateComponent_div_94_Template","RequestRateComponent_div_100_Template","RequestRateComponent_div_101_Template","RequestRateComponent_div_103_Template","RequestRateComponent_Template_button_click_105_listener","time_add","textInterpolate3","propertyInterpolate4","sanitizeUrl","cargo_type_name","cargo_description","incoterms_name","incoterms_city_name","cargo_places_count","cargo_places_volume","cargo_places_weight","cargo_places_density","cargo_dimensions","RouterModule","SharedModule","path","component","title","PublicModule","forChild","declarations","imports","calculateSum","numbers","_convertToNumbers","acc","curr","_preciseAdd","_roundToTwoDecimals","calculateProduct","every","product","_preciseMultiply","calculateRate","options","numPrice","_safeConvertToNumber","numValue","numMin","numFix","aDecimals","toString","bDecimals","maxDecimals","factor","pow","aInt","bInt","Number","isInteger","round","EPSILON","cleanedValue","isNaN","factory","fac","providedIn"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}