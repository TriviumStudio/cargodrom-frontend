{"version":3,"file":"default-src_app_shared_classes_index_ts.js","mappings":"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","sources":["./src/app/shared/classes/index.ts","./src/app/shared/classes/table.ts","./node_modules/rxjs/dist/esm/internal/observable/never.js"],"sourcesContent":["export * from './table';\n","import { MatSnackBar } from '@angular/material/snack-bar';\nimport { ActivatedRoute, ParamMap, Router } from '@angular/router';\nimport { SortColumn } from 'src/app/api/custom_models/sort-column';\nimport { Directive, OnInit, OnDestroy, ViewChild, TemplateRef, ElementRef, HostListener, inject } from '@angular/core';\nimport { BehaviorSubject, NEVER, Observable, of, Subject, takeUntil, tap } from 'rxjs';\nimport { MatSnackBarConfig } from '@angular/material/snack-bar';\nimport { MatDialog } from '@angular/material/dialog';\nimport { FilterService } from 'src/app/filter/services/filter.service';\nimport { SearchFilterSchema } from 'src/app/api/custom_models';\nimport { MatCheckboxChange } from '@angular/material/checkbox';\nimport { UserService } from 'src/app/api/services';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { TableListService } from 'src/app/pages/table-list/table-list.service';\nimport { environment } from 'src/environments/environment';\n\nexport interface LoadParams<T, F> {\n  id?:number;\n  start?: number;\n  count?: number;\n  sort?: SortColumn<T>[];\n  filter?: F\n}\n\n@Directive()\nexport abstract class Table<T extends { id: number }, A = never, F = never> implements OnInit, OnDestroy {\n\n  private rowsSubject = new BehaviorSubject<T[]>([]);\n  rows$: Observable<T[]> = this.rowsSubject.asObservable();\n\n  snackBarWithShortDuration: MatSnackBarConfig = { duration: 1000 };\n  snackBarWithLongDuration: MatSnackBarConfig = { duration: 5000 };\n  filter?: F;\n  column?: string[]=[];\n  sortableColumns?: string[]=[];\n\n  isBiddingMode=false;\n  isRateDetailsMode=false;\n\n  isResizeColumnMode:boolean=false;\n  resizeMetod:string='';\n  isResizing = false;\n  resizingColumn: any = null;\n  resizingColumnBlock: any = null;\n  startX: number = 0;\n  startWidth: number = 0;\n  startWidthBlock: number = 0;\n\n  detailsMethod:string='';\n\n  arrRowsId:number[]=[];\n  quantityContractors:number=0;\n  currentQuantityContractors:number=0\n  currentRequest:any={};\n  contractorsSelectedForRequest:any=[];\n\n\n  tableType: 'custom' | 'delivery'= 'custom';\n\n  requestId:number=0;\n\n  // schemaTest:any\n  schemaCharges:any\n  columnsData:any=[];\n\n  isRowsLoad=false;\n\n  requestCrmStatuses:any[]=[];\n\n  isTableFixedWidth:boolean=false;\n\n  readonly xlsxMimeType = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';\n\n  protected abstract load<T>(params?: LoadParams<T, F>): Observable<{ total: number, items: T[], column?: string[], sort?: string[],sort_new?:any, full_total?:number}>;\n\n  protected removedMessage: string = 'Запись удалена';\n\n  protected destroy$ = new Subject<void>();\n  rows: T[] = [];\n  fullTotal = 0;\n  total = 0;\n  start = 0;\n  limits = [10, 25, 50, 100];\n  count = this.limits[0];\n  abstract sortField: keyof T | A;\n  readonly nameField?: keyof T | A;\n  sortDir: 'asc' | 'desc' = 'asc';\n  @ViewChild('removeDialogRef') removeDialogRef!: TemplateRef<T>;\n  @ViewChild('exportDialogRef') exportDialogRef?: TemplateRef<void>;\n  @ViewChild('importDialogRef') importDialogRef?: TemplateRef<{file: File, text: string}>;\n  @ViewChild('saveBiddingRef') saveBiddingRef?: TemplateRef<void>;\n  @ViewChild('translateRef') translateRef?: TemplateRef<void>;\n  private aliases = new Map<A, (keyof T)[]>();\n\n  @ViewChild('file', { static: true }) file?: ElementRef;\n\n  tableService!:TableListService;\n\n  constructor(\n    protected route: ActivatedRoute,\n    protected router: Router,\n    protected dialog: MatDialog,\n    protected snackBar: MatSnackBar,\n    protected filterService: FilterService,\n    protected userService: UserService,\n  ) {\n    this.tableService = inject(TableListService)\n  }\n\n  ngOnInit(): void {\n    const segments = this.route.snapshot.url.map(s => s.path);\n    this.isBiddingMode = segments[0] === 'bidding';\n    this.isRateDetailsMode = segments[0] === 'details';\n    const type = this.route.snapshot.paramMap.get('type');\n    console.log('type',type, this.route.snapshot.paramMap);\n\n    if(this.isBiddingMode){\n      if (type === 'custom' || type === 'delivery') {\n        this.tableType = type;\n      }\n    }\n    if(this.isRateDetailsMode || this.isBiddingMode){\n      if(this.isRateDetailsMode) this.detailsMethod=segments[1];\n      this.requestId = Number(this.route.snapshot.paramMap.get('id'));//TODO:предлать все на paramMap.get в похожих случаях\n      this.getRequestInfo(this.requestId);\n    }\n    this.filterService.onApply().subscribe(filter => {\n      this.onFilterChange(filter as F);\n    });\n    this.getListParam();\n  }\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  getVal(obj: any, path: string): any {\n    if (!path?.includes('/')) {\n      const value = obj[path] !== undefined ? obj[path] : null;\n      return this.transformClientValue(value,obj);\n    };\n    const keys = path?.split('/');\n    for (const key of keys) {\n      if (obj && obj.hasOwnProperty(key)) {\n          obj = obj[key];\n      } else {\n        return null;\n      }\n    };\n    const result = obj !== undefined ? obj : null;\n    return this.transformClientValue(result,obj);\n  }\n\n  private transformClientValue(value: any, obj:any) {\n    if (typeof value === 'string') {\n      const baseUrl = window.location.href.split('/#')[0];\n      return value.replace(\n        /\\[urlclient\\](.*?)\\[\\/urlclient\\]/ig,\n        `<a class=\"link\" target=\"_blank\" href=\"${baseUrl}/#/customer/edit/${obj.customer_id}\">$1</a>`\n      );\n    }\n    return value;\n  }\n\n  // private transformClientValue(value: any, obj:any) {\n  //   if (typeof value === 'string') {\n  //     return value.replace(\n  //       /\\[urlclient\\](.*?)\\[\\/urlclient\\]/ig,\n  //       `<a class=\"link\" target=\"_blank\" href=\"/#/pages/customer/edit/${obj.customer_id}\">$1</a>`\n  //     );\n  //   }\n  //   return value;\n  // }\n\n  protected loadRows(): void {\n    const sortCol = this.getSort();\n    // let params: any = { start: this.start, count: this.count, ...this.filter ,city_id:['3',1,3] };\n    let params: any = { start: this.start, count: this.count, filter: JSON.stringify(this.filter) };\n    if (this.isRateDetailsMode) {\n      params = { ...params, request_id: this.requestId, method: this.detailsMethod };\n    } else if (this.isBiddingMode) {\n      params = { ...params, bidding_request_id: this.requestId, tab: this.tableType };\n    } else {\n      params = { ...params, sort: JSON.stringify(sortCol)};\n    }\n    console.log(params);\n    // let params:any;\n    // if(this.isRateDetailsMode){\n    //   params= { request_id:this.requestId, method: this.detailsMethod, start: this.start, count: this.count, ...this.filter };\n    // } else if(this.isBiddingMode)  {\n    //   params= { request_id:this.requestId, start: this.start, count: this.count, ...this.filter };\n    // } else {\n    //   params= { start: this.start, count: this.count, sort: JSON.stringify(sortCol) as unknown as SortColumn<T>[], ...this.filter  };\n    // }\n\n    // let params = this.isRateDetailsMode\n    //   ? { request_id:this.requestId, method: this.detailsMethod, start: this.start, count: this.count, ...this.filter }\n    //   : { start: this.start, count: this.count, sort: JSON.stringify(sortCol) as unknown as SortColumn<T>[], ...this.filter  };\n    this.load(params as any)\n    .pipe(\n        tap(()=>{}),\n        takeUntil(this.destroy$),\n      )\n    // this.tableService.getRows(params)\n      .subscribe(rows => {\n        console.log('rows', rows);\n        this.rows = rows ? rows.items as T[] : [];\n        // Отправляем данные в BehaviorSubject\n        this.rowsSubject.next(rows.items as T[]);\n        this.total = rows.total;\n        this.fullTotal = rows.full_total?rows.full_total:0;\n\n        if(this.isBiddingMode){\n          this.arrRowsId=[];\n          rows.items.forEach((element:any) => {\n            this.arrRowsId.push(element.id);\n          });\n          this.getContractorsSelectRequest();\n        }\n         this.isRowsLoad=true\n      });\n  }\n\n  protected delete(params: { body: { id: number } }): Observable<void> {\n    return of();\n  }\n\n  protected loadFilterSchema(): Observable<SearchFilterSchema> {\n    return of({ header: [], main: [], additional: [] });\n  }\n\n  getIntParamSafely(queryParamMap: ParamMap, name: string, fallback: number): number {\n    const value = queryParamMap.get(name);\n    if (value != null) {\n      const intValue = parseInt(value, 10);\n      return intValue;\n    }\n    return fallback;\n  }\n\n  getIntEnumParamSafely(queryParamMap: ParamMap, name: string, values: number[], fallback: number): number {\n    const value = queryParamMap.get(name);\n    if (value != null) {\n      const intValue = parseInt(value, 10);\n      return values.includes(intValue) ? intValue : fallback;\n    }\n    return fallback;\n  }\n\n  getEnumParamSafely(queryParamMap: ParamMap, name: string, values: string[], fallback: string): string {\n    const value = queryParamMap.get(name);\n    if (value != null && values.includes(value)) {\n      return value;\n    }\n    return fallback;\n  }\n\n  getStringParamSafely(queryParamMap: ParamMap, name: string, fallback: string): string {\n    const value = queryParamMap.get(name);\n    if (value != null) {\n      return value;\n    }\n    return fallback;\n  }\n\n  getJsonParamSafely(queryParamMap: ParamMap, name: string, fallback: any): unknown {\n    const value = queryParamMap.get(name);\n    if (value != null) {\n      try {\n        const json = JSON.parse(value);\n        return json;\n      } catch (e) {\n        return fallback;\n      }\n    }\n    return fallback;\n  }\n\n  onStartChange(newStart: number): void {\n    this.router.navigate(['.'], {\n      queryParams: { start: newStart },\n      queryParamsHandling: 'merge',\n      relativeTo: this.route,\n    });\n  }\n\n  onCountChange(newCount: number): void {\n    this.router.navigate(['.'], {\n      queryParams: { count: newCount, start: 0 },\n      queryParamsHandling: 'merge',\n      relativeTo: this.route,\n    });\n  }\n\n  private onFilterChange(filter: F): void {\n    const filterWithNonEmptyValue: any = {};\n    for (const key in filter) {\n      const value = filter[key];\n      if (value != null && (value as any) !== '') {\n        if (!Array.isArray(value) || value.length > 0) {\n          filterWithNonEmptyValue[key] = value;\n        }\n      }\n    }\n    const hasKeys = Object.keys(filterWithNonEmptyValue).length > 0;\n    this.router.navigate(['.'], {\n      queryParams: { start: 0, filter: hasKeys ? JSON.stringify(filterWithNonEmptyValue) : null },\n      queryParamsHandling: 'merge',\n      relativeTo: this.route,\n    });\n  }\n\n  sort(field: keyof T | A): void {\n    if(!this.isResizeColumnMode){\n      if (Array.isArray(this.sortableColumns) && !this.sortableColumns.includes(field as string)) {\n        return;\n      }\n      this.start = 0;\n      if (this.sortField === field) {\n        this.sortDir = this.sortDir === 'asc' ? 'desc' : 'asc';\n      } else {\n        this.sortDir = 'asc';\n        this.sortField = field;\n      }\n      this.router.navigate(['.'], {\n        queryParams: { sortCol: this.sortField, sortDir: this.sortDir, start: this.start },\n        queryParamsHandling: 'merge',\n        relativeTo: this.route,\n      });\n    }\n  }\n\n  getSortClass(field: keyof T | A): string {\n    if(!this.isResizeColumnMode){\n      if (this.sortField === field) {\n        return this.sortDir === 'asc' ? 'column-sortable sort-dir-asc' : 'column-sortable sort-dir-desc';\n      } else if (this.isSortable(field)) {\n        return 'column-sortable';\n      }\n\n    }\n    return '';\n  }\n\n  isSortable(name: keyof T | A): boolean {\n    return Array.isArray(this.sortableColumns) && this.sortableColumns.includes(name as any);\n  }\n\n\n\n  confirmRemove(row: T): void {\n    this.dialog.open(this.removeDialogRef, { data: row }).afterClosed().subscribe(res => {\n      if (res) {\n        this.remove(row);\n      }\n    });\n  }\n\n  remove(row: T): void {\n    const body = { id: row.id };\n    this.delete({ body })\n      .subscribe({\n        next: () => {\n          this.snackBar.open(this.removedMessage, undefined, this.snackBarWithShortDuration);\n          this.loadRows();\n        },\n        error: (err) => this.snackBar.open(`Ошибка удаления: ` + err?.error?.error_message, undefined, { duration: 1000 })\n      });\n  }\n\n  getColTitle(field: keyof T | A): string {\n    if (Array.isArray(this.sortableColumns) && !this.sortableColumns.includes(field as string)) {\n      return '';\n    }\n    if (field === this.sortField) {\n      return this.sortDir === 'asc' ? 'сортировать по убыванию' : 'сортировать по возрастанию'\n    }\n    return 'сортировать по возрастанию';\n  }\n\n  private getSort(): SortColumn<T>[] {\n    const sortCol: SortColumn<T>[] = [];\n    const sortField = this.sortField as unknown as A;\n    if (this.aliases.has(sortField)) {\n      const fields = this.aliases.get(sortField)!;\n      sortCol.push(...fields.map(field => ({ field, dir: this.sortDir })));\n    } else {\n      sortCol.push({ field: this.sortField as keyof T, dir: this.sortDir });\n    }\n    if (this.nameField && this.nameField !== this.sortField) {\n      const name = this.nameField as unknown as A;\n      if (this.aliases.has(name)) {\n        const fields = this.aliases.get(name)!;\n        sortCol.push(...fields.map(field => ({ field, dir: 'asc' as const })));\n      } else {\n        sortCol.push({ field: this.nameField as keyof T, dir: 'asc' });\n      }\n    }\n    return sortCol;\n  }\n\n  registerAlias(alias: A, fields: (keyof T)[]): void {\n    this.aliases.set(alias, fields);\n  }\n\n  protected exportData(param:any): Observable<{data: string; name: string}> {\n    return NEVER;\n  }\n\n  protected importData(body: {data: string; name: string}): Observable<{result: any;import_key: string; text: string}> {\n    return NEVER;\n  }\n\n  protected importDataConfirm(body: {import_key: string}): Observable<any> {\n    return NEVER;\n  }\n\n  protected importResult(body: {import_key: string}): Observable<any> {\n    return NEVER;\n  }\n\n  protected importTemplate(): Observable<{data: string; name: string}> {\n    return NEVER;\n  }\n\n  protected requestContractorSelectGet(id:number,tab:string): Observable<any> {\n    return NEVER;\n  }\n\n  protected requestContractorSelectUpdate(body: {id: number; contractor_id: number[],checked:boolean, tab:string}): Observable<any> {\n    return NEVER;\n  }\n  protected requestSaveBidding(body: {id: number, confirm:boolean, tab:string}): Observable<any> {\n    return NEVER;\n  }\n\n  protected requestInfo(id:number): Observable<any> {\n    return NEVER;\n  }\n\n  protected loadFilterSchemaTest(par:any): Observable<any> {\n    return NEVER;\n  }\n\n  confirmExport(): void {\n    if (!this.exportDialogRef) {\n      return;\n    }\n    this.dialog.open(this.exportDialogRef).afterClosed().subscribe(res => {\n      if (res) { this.exportFile()}\n    });\n  }\n\n  private doImport(file: any): void {\n    if (!this.importDialogRef) {\n      return;\n    }\n    const fileName = file.name;\n    const reader = new FileReader();\n    reader.addEventListener('load', (event) => {\n      if (typeof event.target?.result === 'string') {\n        const base64URL = event.target?.result;\n        const suffix = `;base64,`;\n        const index = base64URL.indexOf(suffix);\n        const data = base64URL.substring(index + suffix.length);\n        const payload = { data, name: fileName };\n        this.importData(payload).subscribe({\n          // next: ({ import_key, text }) => {\n          next: (e) => {\n            const text =e.text;\n            const res =e.result;\n            const import_key=e.import_key;\n            this.dialog.open(this.importDialogRef!, { data: {...payload, text, res} }).afterClosed().subscribe(res => {\n              if (res===2) {\n                this.importResult({ import_key }).subscribe({\n                  next: ({name, data}) => {\n                    const dataUri = `data:${this.xlsxMimeType};base64,${data}`;\n                    const a = document.createElement('a');\n                    a.href = dataUri;\n                    a.download = name;\n                    a.click();\n                    this.snackBar.open('Файл с результатами обработки успешно скачен', undefined, this.snackBarWithShortDuration);\n                    // this.onStartChange(0);\n                    // this.resetPage();\n                  },\n                  error: (err) => this.snackBar.open(`Не удалось скачать файл с результатами обработки: ` + err.error.error_message, undefined, this.snackBarWithShortDuration)\n                });\n              }\n              if (res===1) {\n                this.importDataConfirm({ import_key }).subscribe({\n                  next: () => {\n                    this.snackBar.open('Данные импортированы успешно', undefined, this.snackBarWithShortDuration);\n                    // this.onStartChange(0);\n                    this.resetPage();\n                  },\n                  error: (err) => this.snackBar.open(`Не удалось импортировать данные: ` + err.error.error_message, undefined, this.snackBarWithShortDuration)\n                });\n              }\n            });\n          },\n          error: (err) => this.snackBar.open(`Не удалось импортировать данные: ` + err.error.error_message, undefined, this.snackBarWithShortDuration)\n        });\n      }\n    }, false);\n    reader.addEventListener('error', () => this.snackBar.open(`Ошибка чтения файла ${fileName} `, undefined, this.snackBarWithShortDuration), false);\n    reader.readAsDataURL(file);\n  }\n\n  exportFile(): void {\n    this.exportData({ start: this.start, count: this.count, sort: JSON.stringify(this.getSort()) as unknown as SortColumn<T>[], ...this.filter  }).subscribe({\n      next: ({name, data}) => {\n        const dataUri = `data:${this.xlsxMimeType};base64,${data}`;\n        const a = document.createElement('a');\n        a.href = dataUri;\n        a.download = name;\n        a.click();\n      },\n      error: err => this.snackBar.open(`Не удалось экспортировать данные: ` + err.error?.error_message, undefined, this.snackBarWithShortDuration)\n    })\n  }\n\n  exportFileTemplate(): void {\n    this.importTemplate().subscribe({\n      next: ({name, data}) => {\n        const dataUri = `data:${this.xlsxMimeType};base64,${data}`;\n        const a = document.createElement('a');\n        a.href = dataUri;\n        a.download = name;\n        a.click();\n      },\n      error: err => this.snackBar.open(`Не удалось экспортировать данные: ` + err.error?.error_message, undefined, this.snackBarWithShortDuration)\n    })\n  }\n\n  importFile(): void {\n    const input = this.file?.nativeElement as HTMLInputElement | undefined;\n    if (input) {\n      input.value = '';\n      input.click();\n    }\n  }\n\n  selectFileForImport(): void {\n    const files = this.file?.nativeElement.files as File[] | undefined;\n    const file = files?.[0];\n    if (file?.name.endsWith('.xls')) {\n      this.snackBar.open('Требуется Excel файл в формате .xlsx', undefined, this.snackBarWithShortDuration);\n      return;\n    }\n    if (file?.size && file.size > 2 * 1024 * 1024) {\n      this.snackBar.open('Слишком большой файл', undefined, this.snackBarWithShortDuration);\n      return;\n    }\n    this.doImport(file);\n  }\n\n  resetPage(){\n    this.router.navigate([])\n  }\n\n  getContractorsSelectRequest(){\n    const id = Number(this.route.snapshot.paramMap.get('id'));\n    this.requestContractorSelectGet(id, this.tableType).subscribe({\n      next: (contractors) => {\n        if(contractors){\n          this.quantityContractors=contractors.length;\n          this.contractorsSelectedForRequest=[];\n          this.rows.forEach((row)=>{\n            contractors.forEach((contractor:any)=>{\n              if(row.id===contractor.contractor_id){\n                this.contractorsSelectedForRequest.push(contractor.contractor_id);\n              }\n            })\n          })\n        } else {\n          this.quantityContractors=0;\n        }\n      },\n      complete:()=>  this.currentQuantityContractors=this.contractorsSelectedForRequest.length,\n      error: (err) => this.snackBar.open(`Не получилось ID контрагентов выбранных для отправки запроса ` + err.error.error_message, undefined, this.snackBarWithShortDuration)\n    });\n  }\n\n  updateContractorSelectRequest(contractorId: number,{ checked }: MatCheckboxChange){\n    const requestId = Number(this.route.snapshot.paramMap.get('id'));\n    const check= checked? true:false;\n    this.requestContractorSelectUpdate({id:requestId, contractor_id:[contractorId], checked: check, tab: this.tableType}).subscribe({\n      next: (e) => {\n        this.getContractorsSelectRequest();\n      },\n      error: (err) => this.snackBar.open(`Не получилось изменить список контракторов выбравших запрос ` + err.error.error_message, undefined, this.snackBarWithShortDuration)\n    });\n  }\n\n  updateAllContractorSelectRequest({ checked }: MatCheckboxChange){\n    const requestId = Number(this.route.snapshot.paramMap.get('id'));\n    const check= checked? true:false;\n    this.requestContractorSelectUpdate({id:requestId, contractor_id: this.arrRowsId, checked: check, tab: this.tableType}).subscribe({\n      next: (e) => {\n        if(!check){\n          this.contractorsSelectedForRequest=[];\n        }\n        this.getContractorsSelectRequest();\n      },\n      error: (err) => this.snackBar.open(`Не получилось изменить список контракторов выбравших запрос ` + err.error.error_message, undefined, this.snackBarWithShortDuration)\n    });\n  }\n\n  saveTrueContractorSelectRequest(){\n    const requestId = Number(this.route.snapshot.paramMap.get('id'));\n    this.requestSaveBidding({id:requestId, confirm: true, tab: this.tableType})\n      .pipe(\n        tap((res)=>{}),\n        takeUntil(this.destroy$))\n      .subscribe({\n        next:(answer)=>{\n          this.snackBar.open(`Торги для выбранных подрядчиков успешно начаты `, undefined, this.snackBarWithLongDuration)\n        },\n        error:(err)=>{\n          this.snackBar.open(`Ошибка добавления подрядчиков в торги ` + err.error.error_message, undefined, this.snackBarWithLongDuration)\n        }\n      })\n\n  }\n\n  saveContractorSelectRequest() {\n    const requestId = Number(this.route.snapshot.paramMap.get('id'));\n    this.requestSaveBidding({id:requestId,confirm: false, tab: this.tableType})\n      .pipe(\n        tap(()=>{}),\n        takeUntil(this.destroy$))\n      .subscribe({\n        next:(answer)=>{\n          // if(answer.need_translate){\n          //   this.dialog.open(this.translateRef!).afterClosed().subscribe(res => {\n          //     if(res) this.router.navigate(['/pages/request/edit/translate', this.requestId]);\n          //   })\n          // } else {\n          //   this.saveTrueContractorSelectRequest();\n          // }\n          this.saveTrueContractorSelectRequest();\n        },\n        error:(err)=>{\n          this.dialog.open(this.saveBiddingRef!, { data: {err} }).afterClosed()\n            .subscribe(res => {\n              if(res){\n                this.saveTrueContractorSelectRequest();\n              // } else {\n              //   this.router.navigate([], {\n              //     queryParams: {},\n              //   });\n              }\n            })\n        }\n      })\n  }\n\n  isCheck(id: number): boolean {\n    return this.contractorsSelectedForRequest.includes(id);\n  }\n  isAllCheck(){\n    const filteredArray = this.rows.filter((item:any) => item.bidding_send === false);\n    const count = filteredArray.length;\n    return this.rows.length > 0 && this.currentQuantityContractors === count;\n  }\n  isIndeterminate(){\n    const filteredArray = this.rows.filter((item:any) => item.bidding_send === false);\n    const count = filteredArray.length;\n    return this.rows.length > 0 && this.currentQuantityContractors < count && this.currentQuantityContractors > 0;\n  }\n\n  getRequestInfo(id:number){\n    this.requestInfo(id).subscribe({\n      next: (request) => {\n        console.log('request',request);\n        this.currentRequest=request;\n        if(this.isBiddingMode){\n          this.filterService.value[\"country_departure_id\"]=this.currentRequest.departure_country_id;\n          this.filterService.value[\"country_arrival_id\"]=this.currentRequest.arrival_country_id;\n          this.filterService.value[\"specialization\"]=[this.currentRequest.transport_kind_id];\n          this.filterService.value[\"allow_trade\"]=1;\n          this.filterService.apply();\n        }\n      },\n      error: (err) => this.snackBar.open(`Ошибка получения данных запроса ` + err.error.error_message, undefined, this.snackBarWithShortDuration)\n    });\n  }\n\n  getListParam(){\n    const param=this.isRateDetailsMode?{request_id:this.requestId ,method:this.detailsMethod }:null;\n    this.loadFilterSchemaTest(param)\n      .pipe(\n        tap((schema)=>{\n          console.log('schema',schema);\n          if (this.isBiddingMode) {\n            schema.table.unshift({column:'checkbox',width:'50px', items: [{field:'', title:'', width:'100%'}]});\n          }\n          this.isTableFixedWidth=!schema.table_width_set;\n        }),\n        takeUntil(this.destroy$),\n      )\n      .subscribe({\n        next: (schema) => {\n          this.sortField = schema.sort[0]?.field;\n          this.sortDir = schema.sort[0]?.dir;\n\n          this.filterService.setSearchFilterSchema(schema.search);\n          schema.table.forEach((col:any)=>{\n            this.column?.push(col.column);\n          });\n          schema.sort?.forEach((sor:any)=>{\n            this.sortableColumns?.push(sor.field);\n          });\n          this.columnsData=schema.table;\n          if(schema.status){\n            this.requestCrmStatuses=schema.status;\n          }\n          this.subscribeRouteQueryParamMap();\n        },\n        error: (err) => this.snackBar.open(`Ошибка получения параметров вывода таблицы ` + err?.error?.error_message, undefined, this.snackBarWithShortDuration) ,\n        complete:()=> {\n          // this.subscribeRouteQueryParamMap();\n        }\n      });\n  }\n\n  subscribeRouteQueryParamMap(){\n    this.route.queryParamMap\n      .pipe(\n        tap((queryParamMap:any)=>{\n          // console.log(queryParamMap.params.translate);\n          if(queryParamMap.params.translate){\n            this.saveContractorSelectRequest();\n          }\n          this.start = this.getIntParamSafely(queryParamMap, 'start', this.start);\n          this.count = this.getIntEnumParamSafely(queryParamMap, 'count', this.limits, this.count);\n          this.sortField = this.getStringParamSafely(queryParamMap, 'sortCol', this.sortField as string) as keyof T;\n          this.sortDir = this.getEnumParamSafely(queryParamMap, 'sortDir', ['asc', 'desc'], this.sortDir) as 'asc' | 'desc';\n          this.filter = this.getJsonParamSafely(queryParamMap, 'filter', {}) as F;\n          this.filterService.setValue(this.filter as any);\n          this.loadRows();\n        }),\n        takeUntil(this.destroy$)\n      ).subscribe();\n  }\n\n\n  startResize(event: MouseEvent, column: any,colBlock:any) {\n    this.isResizing = true;\n    this.resizingColumn = column;\n    this.resizingColumnBlock = colBlock;\n    this.startX = event.pageX;\n    this.startWidth = column.width ? parseInt(column.width, 10) : 100; // Начальная ширина\n    this.startWidthBlock = colBlock.width ? parseInt(column.width, 10) : 100;\n    event.preventDefault();\n  }\n\n  @HostListener('document:mousemove', ['$event'])\n  onMouseMove(event: MouseEvent) {\n    if (!this.isResizing || !this.resizingColumn) return;\n    const width = this.startWidth + (event.pageX - this.startX);\n    const widthBlock = this.startWidthBlock + (event.pageX - this.startX);\n    this.resizingColumn.width = `${width}px`;\n    this.resizingColumnBlock.width = `${widthBlock}px`;\n  }\n\n  @HostListener('document:mouseup')\n  onMouseUp() {\n    if (this.isResizing) {\n      this.isResizing = false;\n    };\n    this.resizingColumn = null;\n    this.resizingColumnBlock = null;\n  }\n\n  updateColumnSize(){\n    const td = this.isRateDetailsMode\n    ?document.querySelectorAll('div.table-list.rate table tbody tr:first-child td.mat-mdc-cell')\n    :document.querySelectorAll('table tbody tr:first-child td.mat-mdc-cell');\n    if(!td){\n      return;\n    };\n    td.forEach((col:any, columnIndex:number) => {\n      this.columnsData[columnIndex].width=`${col.offsetWidth}px`;\n      const miniColArr = col.querySelectorAll('div.column');\n      if(!miniColArr){\n        return;\n      };\n      miniColArr.forEach((miniCol:any, miniColumnIndex:number) => {\n        this.columnsData[columnIndex].items[miniColumnIndex]!.width=`${miniCol.offsetWidth}px`;\n      });\n    });\n    this.isResizeColumnMode = !this.isResizeColumnMode;\n    this.isTableFixedWidth = false;\n  }\n\n  // updateColumnSize(){\n  //   const result = Array.from(\n  //     this.isRateDetailsMode\n  //     ?document.querySelectorAll('div.table-list.rate table thead tr th')\n  //     :document.querySelectorAll('table thead tr th'),\n  //     (th:any, columnIndex:number) => {\n  //       if(this.columnsData[columnIndex]){\n  //         // console.log(th.querySelectorAll('div.column'));\n\n  //         th.querySelectorAll('div.column').forEach((col:any, miniColumnIndex:number) => {\n  //           console.log(col, miniColumnIndex);\n  //       });\n\n  //         if(!this.isRateDetailsMode){\n  //           if(columnIndex===0){\n  //           this.columnsData[columnIndex].width=`${th.offsetWidth-1}px`;\n  //           }else{\n  //             this.columnsData[columnIndex].width=`${th.offsetWidth}px`;\n  //           }\n  //         } else {\n  //           this.columnsData[columnIndex].width=`${th.offsetWidth}px`;\n  //         }\n  //       }\n  //     }\n  //   );\n  //   this.isResizeColumnMode=!this.isResizeColumnMode;\n  //   this.isTableFixedWidth=false;\n  // }\n\n  onSaveColumnWidth(){\n    this.userService.userSaveTableParam({body: {method:this.resizeMetod,param:this.columnsData}})\n      .pipe(\n        tap(()=>{}),\n        takeUntil(this.destroy$),\n      )\n    .subscribe(()=>{\n      this.isResizeColumnMode=false;\n    });\n  }\n  onResetColumnWidth(){\n    this.userService.userResetTableParam({body: {method:this.resizeMetod}})\n      .pipe(\n        tap(()=>{}),\n        takeUntil(this.destroy$),\n      )\n    .subscribe(()=>{\n      this.onCancelColumnWidth();\n    });\n  }\n\n  onCancelColumnWidth(){\n    location.reload();\n  }\n\n}\n","import { Observable } from '../Observable';\nimport { noop } from '../util/noop';\nexport const NEVER = new Observable(noop);\nexport function never() {\n    return NEVER;\n}\n"],"names":["inject","BehaviorSubject","NEVER","of","Subject","takeUntil","tap","TableListService","Table","constructor","route","router","dialog","snackBar","filterService","userService","rowsSubject","rows$","asObservable","snackBarWithShortDuration","duration","snackBarWithLongDuration","column","sortableColumns","isBiddingMode","isRateDetailsMode","isResizeColumnMode","resizeMetod","isResizing","resizingColumn","resizingColumnBlock","startX","startWidth","startWidthBlock","detailsMethod","arrRowsId","quantityContractors","currentQuantityContractors","currentRequest","contractorsSelectedForRequest","tableType","requestId","columnsData","isRowsLoad","requestCrmStatuses","isTableFixedWidth","xlsxMimeType","removedMessage","destroy$","rows","fullTotal","total","start","limits","count","sortDir","aliases","Map","tableService","ngOnInit","segments","snapshot","url","map","s","path","type","paramMap","get","console","log","Number","getRequestInfo","onApply","subscribe","filter","onFilterChange","getListParam","ngOnDestroy","next","complete","getVal","obj","includes","value","undefined","transformClientValue","keys","split","key","hasOwnProperty","result","baseUrl","window","location","href","replace","customer_id","loadRows","sortCol","getSort","params","JSON","stringify","request_id","method","bidding_request_id","tab","sort","load","pipe","items","full_total","forEach","element","push","id","getContractorsSelectRequest","delete","loadFilterSchema","header","main","additional","getIntParamSafely","queryParamMap","name","fallback","intValue","parseInt","getIntEnumParamSafely","values","getEnumParamSafely","getStringParamSafely","getJsonParamSafely","json","parse","e","onStartChange","newStart","navigate","queryParams","queryParamsHandling","relativeTo","onCountChange","newCount","filterWithNonEmptyValue","Array","isArray","length","hasKeys","Object","field","sortField","getSortClass","isSortable","confirmRemove","row","open","removeDialogRef","data","afterClosed","res","remove","body","error","err","error_message","getColTitle","has","fields","dir","nameField","registerAlias","alias","set","exportData","param","importData","importDataConfirm","importResult","importTemplate","requestContractorSelectGet","requestContractorSelectUpdate","requestSaveBidding","requestInfo","loadFilterSchemaTest","par","confirmExport","exportDialogRef","exportFile","doImport","file","importDialogRef","fileName","reader","FileReader","addEventListener","event","target","base64URL","suffix","index","indexOf","substring","payload","text","import_key","dataUri","a","document","createElement","download","click","resetPage","readAsDataURL","exportFileTemplate","importFile","input","nativeElement","selectFileForImport","files","endsWith","size","contractors","contractor","contractor_id","updateContractorSelectRequest","contractorId","checked","check","updateAllContractorSelectRequest","saveTrueContractorSelectRequest","confirm","answer","saveContractorSelectRequest","saveBiddingRef","isCheck","isAllCheck","filteredArray","item","bidding_send","isIndeterminate","request","departure_country_id","arrival_country_id","transport_kind_id","apply","schema","table","unshift","width","title","table_width_set","setSearchFilterSchema","search","col","sor","status","subscribeRouteQueryParamMap","translate","setValue","startResize","colBlock","pageX","preventDefault","onMouseMove","widthBlock","onMouseUp","updateColumnSize","td","querySelectorAll","columnIndex","offsetWidth","miniColArr","miniCol","miniColumnIndex","onSaveColumnWidth","userSaveTableParam","onResetColumnWidth","userResetTableParam","onCancelColumnWidth","reload","i0","ɵɵdirectiveInject","i1","ActivatedRoute","Router","i2","MatDialog","i3","MatSnackBar","i4","FilterService","i5","UserService","viewQuery","Table_Query","rf","ctx","$event","ɵɵresolveDocument","Table_mouseup_HostBindingHandler","Observable","noop","never"],"sourceRoot":"webpack:///","x_google_ignoreList":[2]}