<div class="subheader">
  <div class="placer">
    <div class="title">Запросы</div>
    <a class="link add" [routerLink]="['add']"><svg width="14" height="14" viewBox="0 0 14 14" fill="none"
        xmlns="http://www.w3.org/2000/svg">
        <path d="M5 9H3V8H5V6H6V8H8V9H6V11H5V9ZM14 0V14H0V0H14ZM13 1H1V13H13V1Z" fill="#DB563B"></path>
      </svg><span>Новый запрос</span></a>
    <a class="link import"><svg width="14" height="14" viewBox="0 0 14 14" fill="none"
        xmlns="http://www.w3.org/2000/svg">
        <path d="M13 8H14V14H0V0H6V1H1V13H13V8ZM13.2929 0L6 7.29291V4H5V8V9H6H10V8H6.70709L14 0.707092V0H13.2929Z"
          fill="#DB563B"></path>
      </svg><span>Импорт данных</span></a>
    <a class="link export"><svg width="14" height="14" viewBox="0 0 14 14" fill="none"
        xmlns="http://www.w3.org/2000/svg">
        <path d="M13 10H14V14H0V0H4V1H1V13H13V10ZM13 0H9V1H12.2929L5 8.29291V9H5.70709L13 1.70709V5H14V1V0H13Z"
          fill="#DB563B"></path>
      </svg><span>Экспорт данных</span></a>
    <div class="div"></div>
    <app-universal-filter *ngFor="let control of filterService.searchFilterSchema?.header" [filterControl]="control"></app-universal-filter>
  </div>
</div>

<app-table-filter></app-table-filter>

<div class="table-list">
  <table mat-table [dataSource]="rows">

    <ng-container matColumnDef="common">
      <th mat-header-cell *matHeaderCellDef>
        <div class="td-block">
          <div class="column w20" [attr.title]="getColTitle('id')" (click)="sort('id')" [ngClass]="getSortClass('id')">№</div>
          <div class="column w50" [attr.title]="getColTitle('time_add')" (click)="sort('time_add')" [ngClass]="getSortClass('time_add')">Дата</div>
          <div class="column">К/С/О</div>
        </div>
      </th>

      <td mat-cell *matCellDef="let request">
        <div class="td-block">
          <div class="column w20">{{request.id}}</div>
          <div class="column w50">{{request.time_add}}</div>
          <div class="column">_</div>
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="customer">
      <th mat-header-cell *matHeaderCellDef class="w15">
        <div class="td-block">
          <div class="column">Клиент</div>
        </div>
      </th>
      <td mat-cell *matCellDef="let client">
        <div class="td-block">
          <div class="column">{{ client.customer_name }}, {{client.customer_phone}}, {{client.customer_email}}</div>
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="transport">
      <th mat-header-cell *matHeaderCellDef class="w15">
        <div class="td-block">
          <div class="column">Транспорт</div>
        </div>
      </th>
      <td mat-cell *matCellDef="let client">
        <div class="td-block">
          <div class="column">{{ client.transport_type_name }}</div>
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="direction">
      <th mat-header-cell *matHeaderCellDef class="w15">
        <div class="td-block">
          <div class="column w50">Откуда</div>
          <div class="column w50">Куда</div>
        </div>
      </th>
      <td mat-cell *matCellDef="let client">
        <div class="td-block">
          <div class="column w50">{{client.departure_country_name}}, {{ client.departure_city_name}}</div>
          <div class="column w50">{{client.arrival_country_name}}, {{ client.arrival_city_name }}</div>
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="cargo">
      <th mat-header-cell *matHeaderCellDef class="w15">
        <div class="td-block">
          <div class="column w50">Параметры груза</div>
        </div>
      </th>
      <td mat-cell *matCellDef="let client">
        <div class="td-block">
          <div class="column w50">{{ client.cargo_description }},{{client.cargo_places_count}} мест,{{client.cargo_places_weight}} кг, {{client.cargo_places_volume}} м3</div>
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="incoterms">
      <th mat-header-cell *matHeaderCellDef class="w15">
        <div class="td-block">
          <div class="column w50">INC</div>
          <div class="column w50">Ставки дали</div>
        </div>
      </th>
      <td mat-cell *matCellDef="let client">
        <div class="td-block">
          <div class="column w50">{{ client.incoterms_name }}</div>
          <div class="column w50">{{ client.rates }}</div>
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="rate">
      <th mat-header-cell *matHeaderCellDef class="w15">
        <div class="td-block-column">
          <div class="td-block-title">Минимальная ставка</div>
          <div class="td-block-line">
            <div class="column center w30">Подрядчик</div>
            <div class="column center">Срок, дн.</div>
            <div class="column center w30">Сумма</div>
          </div>
        </div>
      </th>
      <td mat-cell *matCellDef="let client">
        <div class="td-block-line">
          <div class="column center w30 bold gray">{{ client.rate_contractor_name }}</div>
          <div class="column center bold gray">{{ client.rate_delivery_days }}</div>
          <div class="column center w30 bold gray">{{ client.rate_delivery_cost }}</div>
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="profit">
      <th mat-header-cell *matHeaderCellDef class="w15">
        <div class="td-block-column">
          <div class="td-block-title">Профит</div>
          <div class="td-block-line">
            <div class="column center w30">Сумма</div>
            <div class="column center">%</div>
          </div>
        </div>
      </th>
      <td mat-cell *matCellDef="let client">
        <div class="td-block-line">
          <div class="column center w30 bold gray">{{ client.profit_amount }}</div>
          <div class="column center bold gray">{{ client.profit_percent }}</div>
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="bid">
      <th mat-header-cell *matHeaderCellDef class="w15">
        <div class="td-block">
          <div class="column w50">Ставка клиенту</div>
        </div>
      </th>
      <td mat-cell *matCellDef="let client">
        <div class="td-block">
          <div class="column w50">{{ client.bid_client }}</div>
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef class="w15">
        <div class="td-block">
          <div class="column w50">Статус CRM</div>
          <div class="column w50">Сотрудник</div>
        </div>
      </th>
      <td mat-cell *matCellDef="let client">
        <div class="td-block">
          <div class="column w50">{{ client.status_id }}</div>
          <div class="column w50">{{ client.manager_executor_name }}</div>
        </div>
      </td>
    </ng-container>

    <ng-container matColumnDef="settings">
      <th mat-header-cell *matHeaderCellDef class="setting">
        <div class="setting-link"></div>
      </th>
      <td mat-cell *matCellDef="let client" class="setting">
        <a class="link-pic link-edit ico ico-pencil fn-link" [routerLink]="[client.id]" title="Редактировать"></a>
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="column"></tr>
    <tr mat-row *matRowDef="let row; columns: column;"></tr>

  </table>
</div>

<app-paginator
  [total]="total"
  [count]="count"
  [start]="start"
  [limits]="limits"
  (startChange)="onStartChange($event)"
  (countChange)="onCountChange($event)">
</app-paginator>




