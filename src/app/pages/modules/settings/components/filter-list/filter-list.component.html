<!-- <table mat-table [dataSource]="rows" cdkDropList (cdkDropListDropped)="drop($event)">
  <ng-container *ngFor="let column of columns" [matColumnDef]="column.field">
    
    <th mat-header-cell *matHeaderCellDef [ngSwitch]="column.field"> 
      <ng-template [ngSwitchDefault]>
        {{column.title}}
      </ng-template>
    </th>

    <td mat-cell *matCellDef="let element" [ngSwitch]="column.field" > 
      <ng-template [ngSwitchDefault]>
        {{element[column.field]}}
      </ng-template>
      <ng-template [ngSwitchCase]="'status'">
        <mat-checkbox class="switcher" [checked]="element.show" (change)="element.show = !element.show">
          {{element.show?'Фильтр включен':'Фильтр отключен'}}
        </mat-checkbox>
      </ng-template >
      <ng-template [ngSwitchCase]="'btn'">
        <button>edit</button>
        <button>del</button>
      </ng-template>
      <ng-template [ngSwitchCase]="'move'">
        <div cdkDragHandle>
          Переместить
        </div>
      </ng-template>
    </td>

  </ng-container>
  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;" cdkDrag></tr>
</table> -->

<table class="example-boundary" mat-table [dataSource]="rows" cdkDropList (cdkDropListDropped)="drop($event)" >
  <!-- Колонки таблицы -->
  <ng-container *ngFor="let column of columns" [matColumnDef]="column.field">
    
    <th mat-header-cell *matHeaderCellDef [ngSwitch]="column.field">
      <ng-template [ngSwitchDefault]>
        {{column.title}}
      </ng-template>
    </th>

    <td mat-cell *matCellDef="let element" [ngSwitch]="column.field">
      
      <ng-template [ngSwitchDefault]>
        {{element[column.field]}}
      </ng-template>

      <ng-template [ngSwitchCase]="'status'">
        <mat-checkbox [checked]="element.show" (change)="element.show = !element.show">
          {{element.show?'Фильтр включен':'Фильтр отключен'}}
        </mat-checkbox>
      </ng-template>

      <ng-template [ngSwitchCase]="'btn'">
        <button mat-button (click)="open(element)">edit</button>
        <button mat-button>del</button>
      </ng-template>

      <ng-template [ngSwitchCase]="'move'">
        <div cdkDragHandle 
             class="drag-handle"
             (mouseenter)="onDragHandleMouseEnter($event)"
             (mouseleave)="onDragHandleMouseLeave($event)">
          Переместить
        </div>
      </ng-template>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row 
      *matRowDef="let row; columns: displayedColumns;" 
      cdkDrag 
      [cdkDragData]="row"
      [cdkDragDisabled]="dragDisabled"
      class="draggable-row"
      cdkDragBoundary=".mdc-data-table__content">
  </tr>
</table>

