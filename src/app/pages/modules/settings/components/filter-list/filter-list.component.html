<!-- <table mat-table [dataSource]="rows" cdkDropList (cdkDropListDropped)="drop($event)">
  <ng-container *ngFor="let column of columns" [matColumnDef]="column.field">
    
    <th mat-header-cell *matHeaderCellDef [ngSwitch]="column.field"> 
      <ng-template [ngSwitchDefault]>
        {{column.title}}
      </ng-template>
    </th>

    <td mat-cell *matCellDef="let element" [ngSwitch]="column.field" > 
      <ng-template [ngSwitchDefault]>
        {{element[column.field]}}
      </ng-template>
      <ng-template [ngSwitchCase]="'status'">
        <mat-checkbox class="switcher" [checked]="element.show" (change)="element.show = !element.show">
          {{element.show?'Фильтр включен':'Фильтр отключен'}}
        </mat-checkbox>
      </ng-template >
      <ng-template [ngSwitchCase]="'btn'">
        <button>edit</button>
        <button>del</button>
      </ng-template>
      <ng-template [ngSwitchCase]="'move'">
        <div cdkDragHandle>
          Переместить
        </div>
      </ng-template>
    </td>

  </ng-container>
  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;" cdkDrag></tr>
</table> -->

<!-- <table class="example-boundary" mat-table [dataSource]="rows" cdkDropList (cdkDropListDropped)="drop($event)" >

  <ng-container *ngFor="let column of columns" [matColumnDef]="column.field">
    
    <th mat-header-cell *matHeaderCellDef [ngSwitch]="column.field">
      <ng-template [ngSwitchDefault]>
        {{column.title}}
      </ng-template>
    </th>

    <td mat-cell *matCellDef="let element" [ngSwitch]="column.field">
      
      <ng-template [ngSwitchDefault]>
        {{element[column.field]}}
      </ng-template>

      <ng-template [ngSwitchCase]="'status'">
        <mat-checkbox [checked]="element.show" (change)="element.show = !element.show">
          {{element.show?'Фильтр включен':'Фильтр отключен'}}
        </mat-checkbox>
      </ng-template>

      <ng-template [ngSwitchCase]="'btn'">
        <button mat-button (click)="openFilterEditor(element)">edit</button>
        <button mat-button>del</button>
      </ng-template>

      <ng-template [ngSwitchCase]="'move'">
        <div cdkDragHandle 
             class="drag-handle"
             (mouseenter)="onDragHandleMouseEnter($event)"
             (mouseleave)="onDragHandleMouseLeave($event)">
          Переместить
        </div>
      </ng-template>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row 
      *matRowDef="let row; columns: displayedColumns;" 
      cdkDrag 
      [cdkDragData]="row"
      [cdkDragDisabled]="dragDisabled"
      class="draggable-row"
      cdkDragBoundary=".mdc-data-table__content">
  </tr>
</table> -->

<div class="flex-table" cdkDropList (cdkDropListDropped)="drop($event)">
  <!-- Заголовки -->
  <div class="flex-row header">
    <div *ngFor="let column of columns" class="flex-cell" [class]="column?.class" [ngSwitch]="column.field">
      <ng-template [ngSwitchDefault]>
        {{column.title}}
      </ng-template>
    </div>
  </div>

  <!-- Строки -->
  <div *ngFor="let row of rows" 
       class="flex-row draggable-row body"
       cdkDrag 
       [cdkDragData]="row"
       [cdkDragDisabled]="dragDisabled"
       cdkDragBoundary=".flex-table">
    
    <div *ngFor="let column of columns" class="flex-cell" [class]="column?.class" [ngSwitch]="column.field">
      <ng-template [ngSwitchDefault]>
        {{row[column.field]}}
      </ng-template>

      <ng-template [ngSwitchCase]="'status'">
        <mat-checkbox [checked]="row.show" (change)="row.show = !row.show" class="switcher">
          {{row.show?'Фильтр включен':'Фильтр отключен'}}
        </mat-checkbox>
      </ng-template>

      <ng-template [ngSwitchCase]="'btn'">
        <button mat-button class="icon edit" (click)="openFilterEditor(row)" style="margin-right: 10px;"></button>
        <button mat-button class="icon delete-gr" (click)="onDeletefilter(row.id)"></button>
      </ng-template>

      <ng-template [ngSwitchCase]="'move'">
        <div cdkDragHandle 
             class="drag-handle"
             (mouseenter)="onDragHandleMouseEnter($event)"
             (mouseleave)="onDragHandleMouseLeave($event)">
          Переместить
        </div>
      </ng-template>
    </div>
  </div>
</div>